
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A library for working with prompt templates locally or on the Hugging Face Hub">
      
      
      
        <link rel="canonical" href="https://moritzlaurer.github.io/prompt_templates/reference/prompt_templates/">
      
      
        <link rel="prev" href="../../template_dictionaries/">
      
      
        <link rel="next" href="../utils/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Prompt templates - Prompt Templates</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prompt-templates" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Prompt Templates" class="md-header__button md-logo" aria-label="Prompt Templates" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prompt Templates
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prompt templates
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/MoritzLaurer/prompt_templates" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    moritzlaurer/prompt_templates
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Prompt Templates" class="md-nav__button md-logo" aria-label="Prompt Templates" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Prompt Templates
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/MoritzLaurer/prompt_templates" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    moritzlaurer/prompt_templates
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create_template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a Prompt Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_prompt_format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Prompt Format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repo_types_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HF Hub Repo Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../template_dictionaries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PromptTemplateDictionaries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Prompt templates
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Prompt templates
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates" class="md-nav__link">
    <span class="md-ellipsis">
      prompt_templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="prompt_templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      BasePromptTemplate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BasePromptTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.load_from_local" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.load_from_hub" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_hub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.save_to_local" class="md-nav__link">
    <span class="md-ellipsis">
      save_to_local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.save_to_hub" class="md-nav__link">
    <span class="md-ellipsis">
      save_to_hub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.display" class="md-nav__link">
    <span class="md-ellipsis">
      display
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.TextPromptTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      TextPromptTemplate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextPromptTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.TextPromptTemplate.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.TextPromptTemplate.to_langchain_template" class="md-nav__link">
    <span class="md-ellipsis">
      to_langchain_template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      ChatPromptTemplate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChatPromptTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate.create_messages" class="md-nav__link">
    <span class="md-ellipsis">
      create_messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate.to_langchain_template" class="md-nav__link">
    <span class="md-ellipsis">
      to_langchain_template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary" class="md-nav__link">
    <span class="md-ellipsis">
      PromptTemplateDictionary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PromptTemplateDictionary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.load_from_local" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utility functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../populators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Populating templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../template_dictionaries.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PromptTemplateDictionaries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates" class="md-nav__link">
    <span class="md-ellipsis">
      prompt_templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="prompt_templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      BasePromptTemplate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BasePromptTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.load_from_local" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.load_from_hub" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_hub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.save_to_local" class="md-nav__link">
    <span class="md-ellipsis">
      save_to_local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.save_to_hub" class="md-nav__link">
    <span class="md-ellipsis">
      save_to_hub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.BasePromptTemplate.display" class="md-nav__link">
    <span class="md-ellipsis">
      display
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.TextPromptTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      TextPromptTemplate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TextPromptTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.TextPromptTemplate.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.TextPromptTemplate.to_langchain_template" class="md-nav__link">
    <span class="md-ellipsis">
      to_langchain_template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      ChatPromptTemplate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChatPromptTemplate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate.create_messages" class="md-nav__link">
    <span class="md-ellipsis">
      create_messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.ChatPromptTemplate.to_langchain_template" class="md-nav__link">
    <span class="md-ellipsis">
      to_langchain_template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary" class="md-nav__link">
    <span class="md-ellipsis">
      PromptTemplateDictionary
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PromptTemplateDictionary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.load_from_local" class="md-nav__link">
    <span class="md-ellipsis">
      load_from_local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.__getitem__" class="md-nav__link">
    <span class="md-ellipsis">
      __getitem__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prompt_templates.prompt_templates.PromptTemplateDictionary.populate" class="md-nav__link">
    <span class="md-ellipsis">
      populate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="prompt-templates">Prompt templates</h1>
<p>This section documents the prompt template classes.</p>


<div class="doc doc-object doc-module">



<h2 id="prompt_templates.prompt_templates" class="doc doc-heading">
          <span class="doc doc-object-name doc-module-name">prompt_templates.prompt_templates</span>


</h2>

  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="prompt_templates.prompt_templates.BasePromptTemplate" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">BasePromptTemplate</span>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code></p>

  
      <p>An abstract base class for prompt templates.</p>
<p>This class defines the common interface and shared functionality for all prompt templates.
Users should not instantiate this class directly, but instead use TextPromptTemplate
or ChatPromptTemplate, which are subclasses of BasePromptTemplate.</p>

            <details class="quote">
              <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="k">class</span><span class="w"> </span><span class="nc">BasePromptTemplate</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An abstract base class for prompt templates.</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    This class defines the common interface and shared functionality for all prompt templates.</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    Users should not instantiate this class directly, but instead use TextPromptTemplate</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    or ChatPromptTemplate, which are subclasses of BasePromptTemplate.</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="n">template</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span class="n">template_variables</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>        <span class="n">client_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="n">custom_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a prompt template.</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">            template: The template string or list of message dictionaries.</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">            template_variables: List of variables used in the template.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">            metadata: Dictionary of metadata about the template.</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">            client_parameters: Dictionary of parameters for the inference client (e.g., temperature, model).</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">            custom_data: Dictionary of custom data which does not fit into the other categories.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">            populator: The populator to use. Choose from Literal[&quot;jinja2&quot;, &quot;double_brace_regex&quot;, &quot;single_brace_regex&quot;]. Defaults to &quot;jinja2&quot;.</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">            jinja2_security_level: Security level for Jinja2 populator. Choose from Literal[&quot;strict&quot;, &quot;standard&quot;, &quot;relaxed&quot;]. Defaults to &quot;standard&quot;.</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="c1"># Type validation</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="k">if</span> <span class="n">template_variables</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_variables</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;template_variables must be a list, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">template_variables</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;metadata must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="k">if</span> <span class="n">client_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_parameters</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;client_parameters must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">client_parameters</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="k">if</span> <span class="n">custom_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">custom_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;custom_data must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">custom_data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="c1"># Initialize attributes</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">template</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span> <span class="o">=</span> <span class="n">template_variables</span> <span class="ow">or</span> <span class="p">[]</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span> <span class="o">=</span> <span class="n">client_parameters</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span> <span class="o">=</span> <span class="n">custom_data</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">populator</span> <span class="o">=</span> <span class="n">populator</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">jinja2_security_level</span> <span class="o">=</span> <span class="n">jinja2_security_level</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span class="c1"># Validate template format</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_template_format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="c1"># Create populator instance</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_create_populator_instance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">populator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jinja2_security_level</span><span class="p">)</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span class="c1"># Validate that variables provided in template and template_variables are equal</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">:</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_template_variables_equality</span><span class="p">()</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="nd">@abstractmethod</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Abstract method to populate the prompt template with user-provided variables.</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">            **user_provided_variables: The values to fill placeholders in the template.</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">            str | List[Dict[str, Any]]: The populated prompt content.</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="k">pass</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load_from_local</span><span class="p">(</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;relaxed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;TextPromptTemplate&quot;</span><span class="p">,</span> <span class="s2">&quot;ChatPromptTemplate&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a prompt template from a local YAML file.</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">            path (Union[str, Path]): Path to the YAML file containing the prompt template</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">            populator ([PopulatorType]): The populator type to use among Literal[&quot;double_brace_regex&quot;, &quot;single_brace_regex&quot;, &quot;jinja2&quot;]. Defaults to &quot;jinja2&quot;.</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">            jinja2_security_level (Literal[&quot;strict&quot;, &quot;standard&quot;, &quot;relaxed&quot;], optional): The security level for the Jinja2 populator. Defaults to &quot;standard&quot;.</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">            yaml_library (str, optional): The YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot;.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">            Union[TextPromptTemplate, ChatPromptTemplate]: The loaded template instance</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">            FileNotFoundError: If the file doesn&#39;t exist</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">            ValueError: If the file is not a .yaml/.yml file</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">            ValueError: If the YAML structure is invalid</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">            ValueError: If attempting to load a text template with ChatPromptTemplate or vice versa</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">            Download a text prompt template:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">            &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_local(&quot;./tests/test_data/example_prompts/translate.yaml&quot;)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">            &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">            TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\\n{{..., template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">            &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">            [&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">            &gt;&gt;&gt; prompt_template.metadata[&#39;name&#39;]</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">            &#39;Simple Translator&#39;</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">            Download a chat prompt template:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_local(&quot;./tests/test_data/example_prompts/code_teacher.yaml&quot;)</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">            &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">            ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a...&#39;, template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">            [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">            [&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">            &gt;&gt;&gt; prompt_template.metadata[&#39;version&#39;]</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">            &#39;0.0.1&#39;</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template file not found: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_PROMPT_EXTENSIONS</span><span class="p">:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template file must be a .yaml or .yml file, got: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>        <span class="n">yaml</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>                <span class="k">if</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>                    <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>                    <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>                <span class="sa">f</span><span class="s2">&quot;Failed to parse &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39; as a valid YAML file. &quot;</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span class="sa">f</span><span class="s2">&quot;Please ensure the file is properly formatted.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>                <span class="sa">f</span><span class="s2">&quot;Error details: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_template_type</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_load_template_from_dict</span><span class="p">(</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="p">)</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="n">repo_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span class="n">revision</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;relaxed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;TextPromptTemplate&quot;</span><span class="p">,</span> <span class="s2">&quot;ChatPromptTemplate&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a prompt template from the Hugging Face Hub.</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">        Downloads and loads a prompt template from a repository on the Hugging Face Hub.</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">        The template file should be a YAML file following the standardized format.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">            repo_id (str): The repository ID on Hugging Face Hub (e.g., &#39;username/repo&#39;)</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">            filename (str): Name of the YAML file containing the template</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">            repo_type (str, optional): Type of repository. Must be one of</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">                [&#39;dataset&#39;, &#39;model&#39;, &#39;space&#39;]. Defaults to &quot;dataset&quot;</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">            revision (Optional[str], optional): Git revision to download from.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">                Can be a branch name, tag, or commit hash. Defaults to None</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">            populator ([PopulatorType]): The populator type to use among Literal[&quot;double_brace_regex&quot;, &quot;single_brace_regex&quot;, &quot;jinja2&quot;]. Defaults to &quot;jinja2&quot;.</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">            jinja2_security_level (Literal[&quot;strict&quot;, &quot;standard&quot;, &quot;relaxed&quot;], optional): The security level for the Jinja2 populator. Defaults to &quot;standard&quot;.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">            yaml_library (str, optional): The YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot;.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">            Union[TextPromptTemplate, ChatPromptTemplate]: The loaded template instance</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">            ValueError: If repo_id format is invalid</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">            ValueError: If repo_type is invalid</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">            FileNotFoundError: If file cannot be downloaded from Hub</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">            ValueError: If the YAML structure is invalid</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">            ValueError: If attempting to load a text template with ChatPromptTemplate or vice versa</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="sd">            Download a text prompt template:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">            &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">            ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">            &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">            TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\\n{{...&#39;, template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">            &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">            [&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">            &gt;&gt;&gt; prompt_template.metadata[&#39;name&#39;]</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">            &#39;Simple Translator&#39;</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">            Download a chat prompt template:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">            ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">            &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">            ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a...&#39;, template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">            [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">            [&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">            &gt;&gt;&gt; prompt_template.metadata[&#39;version&#39;]</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">            &#39;0.0.1&#39;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>        <span class="c1"># Validate Hub parameters</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>            <span class="n">validate_repo_id</span><span class="p">(</span><span class="n">repo_id</span><span class="p">)</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid repo_id format: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="k">if</span> <span class="n">repo_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;space&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;repo_type must be one of [&#39;dataset&#39;, &#39;model&#39;, &#39;space&#39;], got </span><span class="si">{</span><span class="n">repo_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="c1"># Ensure .yaml extension</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">VALID_PROMPT_EXTENSIONS</span><span class="p">):</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>            <span class="n">filename</span> <span class="o">+=</span> <span class="s2">&quot;.yaml&quot;</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>            <span class="n">file_path</span> <span class="o">=</span> <span class="n">hf_hub_download</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">)</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to download template from Hub: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>        <span class="n">yaml</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>                <span class="k">if</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">:</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>                    <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>                    <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>                <span class="sa">f</span><span class="s2">&quot;Failed to parse &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; as a valid YAML file. &quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>                <span class="sa">f</span><span class="s2">&quot;Please ensure the file is properly formatted.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>                <span class="sa">f</span><span class="s2">&quot;Error details: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>            <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="n">file_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; from &#39;</span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_template_type</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">file_info</span><span class="p">)</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_load_template_from_dict</span><span class="p">(</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>            <span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="p">)</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>    <span class="nd">@staticmethod</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_load_template_from_dict</span><span class="p">(</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="n">prompt_file_dic</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;relaxed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;TextPromptTemplate&quot;</span><span class="p">,</span> <span class="s2">&quot;ChatPromptTemplate&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal method to load a template from parsed YAML data.</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="sd">            prompt_file_dic: Dictionary containing parsed YAML data</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="sd">            populator: Optional template populator type</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="sd">            jinja2_security_level: Security level for Jinja2 populator</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">            Union[TextPromptTemplate, ChatPromptTemplate]: Loaded template instance</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">            ValueError: If YAML structure is invalid</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span class="c1"># Validate YAML structure</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>        <span class="k">if</span> <span class="s2">&quot;prompt&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prompt_file_dic</span><span class="p">:</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid YAML structure: The top-level keys are </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>                <span class="s2">&quot;The YAML file must contain the key &#39;prompt&#39; as the top-level key.&quot;</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>            <span class="p">)</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>        <span class="n">prompt_data</span> <span class="o">=</span> <span class="n">prompt_file_dic</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>        <span class="c1"># Check for standard &quot;template&quot; key</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="k">if</span> <span class="s2">&quot;template&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prompt_data</span><span class="p">:</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>            <span class="k">if</span> <span class="s2">&quot;messages&quot;</span> <span class="ow">in</span> <span class="n">prompt_data</span><span class="p">:</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>                <span class="n">template</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>                <span class="k">del</span> <span class="n">prompt_data</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>                    <span class="s2">&quot;The YAML file uses the &#39;messages&#39; key for the chat prompt template following the LangChain format. &quot;</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>                    <span class="s2">&quot;The &#39;messages&#39; key is renamed to &#39;template&#39; for simplicity and consistency in this library.&quot;</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>                <span class="p">)</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid YAML structure under &#39;prompt&#39; key: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">prompt_data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>                    <span class="s2">&quot;The YAML file must contain a &#39;template&#39; key under &#39;prompt&#39;. &quot;</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>                    <span class="s2">&quot;Please refer to the documentation for a compatible YAML example.&quot;</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>                <span class="p">)</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>            <span class="n">template</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="c1"># Extract fields</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="n">template_variables</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template_variables&quot;</span><span class="p">)</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="n">metadata</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="n">client_parameters</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_parameters&quot;</span><span class="p">)</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>        <span class="n">custom_data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="s2">&quot;template_variables&quot;</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;client_parameters&quot;</span><span class="p">,</span> <span class="s2">&quot;custom_data&quot;</span><span class="p">]</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>        <span class="p">}</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>        <span class="n">custom_data</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;custom_data&quot;</span><span class="p">,</span> <span class="p">{}),</span> <span class="o">**</span><span class="n">custom_data</span><span class="p">}</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="c1"># Determine template type and create appropriate instance</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">template</span><span class="p">):</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span class="k">return</span> <span class="n">ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>                <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>                <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>                <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>                <span class="n">client_parameters</span><span class="o">=</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>                <span class="n">custom_data</span><span class="o">=</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>                <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>                <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>            <span class="p">)</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>            <span class="k">return</span> <span class="n">TextPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>                <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>                <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>                <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>                <span class="n">client_parameters</span><span class="o">=</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>                <span class="n">custom_data</span><span class="o">=</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>                <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>                <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>            <span class="p">)</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid template type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">template</span><span class="p">)</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>                <span class="s2">&quot;Template must be either a string for text prompts or a list of dictionaries for chat prompts.&quot;</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>            <span class="p">)</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_template_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prompt_file_dic</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">file_info</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that the template type matches the class it was called from.</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">            prompt_file_dic: Dictionary containing parsed YAML data</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">            file_info: String describing the file location (e.g., file path or Hub location)</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">                for error messages</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">            ValueError: If template structure is invalid or type doesn&#39;t match the class</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;prompt&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prompt_file_dic</span><span class="p">:</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File &#39;</span><span class="si">{</span><span class="n">file_info</span><span class="si">}</span><span class="s2">&#39; must contain a top-level &#39;prompt&#39; key&quot;</span><span class="p">)</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="n">template</span> <span class="o">=</span> <span class="n">prompt_file_dic</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">)</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>        <span class="k">if</span> <span class="n">template</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template is missing in file &#39;</span><span class="si">{</span><span class="n">file_info</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>        <span class="n">is_chat_template</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">template</span><span class="p">)</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>        <span class="n">is_text_template</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;ChatPromptTemplate&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_chat_template</span><span class="p">:</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>                <span class="sa">f</span><span class="s2">&quot;Cannot load a text template using ChatPromptTemplate. The template in &#39;</span><span class="si">{</span><span class="n">file_info</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>                <span class="s2">&quot;appears to be a text template. Use TextPromptTemplate.load_from_local() or .load_from_hub() instead.&quot;</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>            <span class="p">)</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="k">elif</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;TextPromptTemplate&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_text_template</span><span class="p">:</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>                <span class="sa">f</span><span class="s2">&quot;Cannot load a chat template using TextPromptTemplate. The template in </span><span class="si">{</span><span class="n">file_info</span><span class="si">}</span><span class="s2"> &quot;</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>                <span class="s2">&quot;appears to be a chat template. Use ChatPromptTemplate.load_from_local() or .load_from_hub() instead.&quot;</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>            <span class="p">)</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_local</span><span class="p">(</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>        <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>        <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>        <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>        <span class="n">prettify_template</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the prompt template as a local YAML or JSON file.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">            path: Path where to save the file. Can be string or Path object</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">            format: Output format (&quot;yaml&quot; or &quot;json&quot;). If None, inferred from filename</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">            yaml_library: YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot; for better formatting and format preservation.</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">            prettify_template: If true format the template content with literal block scalars, i.e. &quot;|-&quot; in yaml.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">                This makes the string behave like a Python &#39;&#39;&#39;...&#39;&#39;&#39; block to make strings easier to read and edit.</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">                Defaults to True</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">            &gt;&gt;&gt; messages_template = [</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">            ...     {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;},</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">            ...     {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Explain what {{concept}} is in {{programming_language}}.&quot;}</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">            ... ]</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">            &gt;&gt;&gt; template_variables = [&quot;concept&quot;, &quot;programming_language&quot;]</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">            &gt;&gt;&gt; metadata = {</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">            ...     &quot;name&quot;: &quot;Code Teacher&quot;,</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">            ...     &quot;description&quot;: &quot;A simple chat prompt for explaining programming concepts with examples&quot;,</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">            ...     &quot;tags&quot;: [&quot;programming&quot;, &quot;education&quot;],</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">            ...     &quot;version&quot;: &quot;0.0.1&quot;,</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">            ...     &quot;author&quot;: &quot;My Awesome Company&quot;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">            ... }</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate(</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">            ...     template=messages_template,</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">            ...     template_variables=template_variables,</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">            ...     metadata=metadata,</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="sd">            &gt;&gt;&gt; prompt_template.save_to_local(&quot;./tests/test_data/example_prompts/code_teacher_test.yaml&quot;)  # doctest: +SKIP</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="c1"># Handle format inference and validation</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>        <span class="n">file_extension</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>            <span class="c1"># Infer format from extension</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>            <span class="k">if</span> <span class="n">file_extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;yaml&quot;</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>            <span class="k">elif</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot infer format from file extension: </span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>            <span class="c1"># Validate explicitly provided format matches file extension</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>            <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>            <span class="k">if</span> <span class="nb">format</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">file_extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>                <span class="c1"># Both are YAML variants, so they match</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>                <span class="k">pass</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>            <span class="k">elif</span> <span class="nb">format</span> <span class="o">!=</span> <span class="n">file_extension</span><span class="p">:</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Provided format &#39;</span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&#39; does not match file extension &#39;</span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>            <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>                <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>                <span class="s2">&quot;template_variables&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>                <span class="s2">&quot;client_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>                <span class="s2">&quot;custom_data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>            <span class="p">}</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>        <span class="p">}</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>        <span class="k">if</span> <span class="n">prettify_template</span><span class="p">:</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_template_content</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">])</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>            <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>            <span class="k">else</span><span class="p">:</span>  <span class="c1"># yaml</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>                <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>                <span class="k">if</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">:</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>                    <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>                <span class="k">elif</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;pyyaml&quot;</span><span class="p">:</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>                    <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_unicode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>                        <span class="sa">f</span><span class="s2">&quot;Unknown yaml library: </span><span class="si">{</span><span class="n">yaml_library</span><span class="si">}</span><span class="s2">. Valid options are: &#39;ruamel&#39; (default) or &#39;pyyaml&#39;.&quot;</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>                    <span class="p">)</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_hub</span><span class="p">(</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>        <span class="n">repo_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>        <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>        <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>        <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>        <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>        <span class="n">prettify_template</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>        <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>        <span class="n">create_repo</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span class="n">private</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>        <span class="n">resource_group_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span class="n">revision</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>        <span class="n">create_pr</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>        <span class="n">commit_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>        <span class="n">commit_description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>        <span class="n">parent_commit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommitInfo</span><span class="p">:</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the prompt template to the Hugging Face Hub as a YAML or JSON file.</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">            repo_id: The repository ID on the Hugging Face Hub (e.g., &quot;username/repo-name&quot;)</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">            filename: Name of the file to save (e.g., &quot;prompt.yaml&quot; or &quot;prompt.json&quot;)</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">            repo_type: Type of repository (&quot;dataset&quot;, &quot;model&quot;, or &quot;space&quot;). Defaults to &quot;dataset&quot;</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">            token: Hugging Face API token. If None, will use token from environment</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">            commit_message: Custom commit message. If None, uses default message</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">            create_repo: Whether to create the repository if it doesn&#39;t exist. Defaults to False</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="sd">            format: Output format (&quot;yaml&quot; or &quot;json&quot;). If None, inferred from filename extension</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">            yaml_library: YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot; for better formatting and format preservation.</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">            prettify_template: If true format the template content with literal block scalars, i.e. &quot;|-&quot; in yaml.</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">                This makes the string behave like a Python &#39;&#39;&#39;...&#39;&#39;&#39; block to make strings easier to read and edit.</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">                Defaults to True</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a><span class="sd">            private: Whether to create a private repository. Defaults to False</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">            resource_group_id: Optional resource group ID to associate with the repository</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">            revision: Optional branch/revision to push to. Defaults to main branch</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">            create_pr: Whether to create a Pull Request instead of pushing directly. Defaults to False</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">            commit_description: Optional commit description</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">            parent_commit: Optional parent commit to create PR from</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">            CommitInfo: Information about the commit/PR</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">            &gt;&gt;&gt; messages_template = [</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">            ...     {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;},</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="sd">            ...     {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Explain what {{concept}} is in {{programming_language}}.&quot;}</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">            ... ]</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">            &gt;&gt;&gt; template_variables = [&quot;concept&quot;, &quot;programming_language&quot;]</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">            &gt;&gt;&gt; metadata = {</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">            ...     &quot;name&quot;: &quot;Code Teacher&quot;,</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">            ...     &quot;description&quot;: &quot;A simple chat prompt for explaining programming concepts with examples&quot;,</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">            ...     &quot;tags&quot;: [&quot;programming&quot;, &quot;education&quot;],</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">            ...     &quot;version&quot;: &quot;0.0.1&quot;,</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">            ...     &quot;author&quot;: &quot;My Awesome Company&quot;</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">            ... }</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate(</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">            ...     template=messages_template,</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">            ...     template_variables=template_variables,</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">            ...     metadata=metadata,</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">            &gt;&gt;&gt; prompt_template.save_to_hub(  # doctest: +SKIP</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts_test&quot;,</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">            ...     filename=&quot;code_teacher_test.yaml&quot;,</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">            ...     #create_repo=True,  # if the repo does not exist, create it</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">            ...     #private=True,  # if you want to create a private repo</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">            ...     #token=&quot;hf_...&quot;</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>        <span class="c1"># Handle format inference and validation</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>            <span class="c1"># Infer format from extension</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>            <span class="n">extension</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>            <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;yaml&quot;</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>            <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;yaml&quot;</span>  <span class="c1"># default if no extension</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>                <span class="n">filename</span> <span class="o">+=</span> <span class="s2">&quot;.yaml&quot;</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>            <span class="c1"># Validate explicitly provided format matches file extension</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>            <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>            <span class="n">file_extension</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>            <span class="k">if</span> <span class="nb">format</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">file_extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>                <span class="c1"># Both are YAML variants, so they match</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>                <span class="k">pass</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>            <span class="k">elif</span> <span class="nb">format</span> <span class="o">!=</span> <span class="n">file_extension</span><span class="p">:</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Provided format &#39;</span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&#39; does not match file extension &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>        <span class="c1"># Convert template to the specified format</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>            <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>                <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>                <span class="s2">&quot;template_variables&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>                <span class="s2">&quot;client_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>                <span class="s2">&quot;custom_data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>            <span class="p">}</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>        <span class="p">}</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="k">if</span> <span class="n">prettify_template</span><span class="p">:</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_template_content</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">])</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>            <span class="n">content</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>            <span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># yaml</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>            <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>            <span class="n">string_stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>            <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">string_stream</span><span class="p">)</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>            <span class="n">content</span> <span class="o">=</span> <span class="n">string_stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>            <span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>        <span class="c1"># Upload to Hub</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>        <span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>        <span class="c1"># Check if repo exists before attempting to create it to avoid overwriting repo card</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>            <span class="n">api</span><span class="o">.</span><span class="n">repo_info</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">)</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>            <span class="n">repo_exists</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>        <span class="k">except</span> <span class="n">RepositoryNotFoundError</span><span class="p">:</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>            <span class="n">repo_exists</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>        <span class="k">if</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>                <span class="sa">f</span><span class="s2">&quot;You specified create_repo=</span><span class="si">{</span><span class="n">create_repo</span><span class="si">}</span><span class="s2">, but repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2"> already exists. &quot;</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>                <span class="s2">&quot;Skipping repo creation.&quot;</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>            <span class="p">)</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2"> does not exist. Set create_repo=True to create it.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>        <span class="k">elif</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating/Updating HF Hub repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>            <span class="n">api</span><span class="o">.</span><span class="n">create_repo</span><span class="p">(</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>                <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>                <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>                <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>                <span class="n">private</span><span class="o">=</span><span class="n">private</span><span class="p">,</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>                <span class="c1"># exist_ok=exist_ok,  # not using this arg to avoid inconsistency</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>                <span class="n">resource_group_id</span><span class="o">=</span><span class="n">resource_group_id</span><span class="p">,</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>            <span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>            <span class="n">repocard_text</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>                <span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>                <span class="s2">&quot;library_name: prompt-templates</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>                <span class="s2">&quot;tags:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>                <span class="s2">&quot;- prompts</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>                <span class="s2">&quot;- prompt-templates</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>                <span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>                <span class="s2">&quot;This repository was created with the `prompt-templates` library and contains</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>                <span class="s2">&quot;prompt templates in the `Files` tab.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>                <span class="s2">&quot;For easily reusing these templates, see the [documentation](https://github.com/MoritzLaurer/prompt-templates).&quot;</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>            <span class="p">)</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>            <span class="n">card</span> <span class="o">=</span> <span class="n">RepoCard</span><span class="p">(</span><span class="n">repocard_text</span><span class="p">)</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>            <span class="n">card</span><span class="o">.</span><span class="n">push_to_hub</span><span class="p">(</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>                <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>                <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>                <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>                <span class="n">commit_message</span><span class="o">=</span><span class="s2">&quot;Create/Update repo card with prompt-templates library&quot;</span><span class="p">,</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>                <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>                <span class="n">parent_commit</span><span class="o">=</span><span class="n">parent_commit</span><span class="p">,</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>            <span class="p">)</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>            <span class="c1"># Update repo metadata to make prompt templates discoverable on the HF Hub</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating HF Hub repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2"> with prompt-templates library metadata.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>            <span class="n">metadata_update</span><span class="p">(</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>                <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>                <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;library_name&quot;</span><span class="p">:</span> <span class="s2">&quot;prompt-templates&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;prompts&quot;</span><span class="p">,</span> <span class="s2">&quot;prompt-templates&quot;</span><span class="p">]},</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>                <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>                <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>                <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>                <span class="n">commit_message</span><span class="o">=</span><span class="n">commit_message</span> <span class="ow">or</span> <span class="s2">&quot;Update repo metadata with prompt-templates library&quot;</span><span class="p">,</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>                <span class="n">commit_description</span><span class="o">=</span><span class="n">commit_description</span><span class="p">,</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>                <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>                <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>                <span class="n">parent_commit</span><span class="o">=</span><span class="n">parent_commit</span><span class="p">,</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>            <span class="p">)</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>        <span class="c1"># Upload file</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uploading prompt template </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> to HF Hub repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>        <span class="k">return</span> <span class="n">api</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>            <span class="n">path_or_fileobj</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">content_bytes</span><span class="p">),</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>            <span class="n">path_in_repo</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>            <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>            <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>            <span class="n">commit_message</span><span class="o">=</span><span class="n">commit_message</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;Upload prompt template </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>            <span class="n">commit_description</span><span class="o">=</span><span class="n">commit_description</span><span class="p">,</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>            <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>            <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>            <span class="n">parent_commit</span><span class="o">=</span><span class="n">parent_commit</span><span class="p">,</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>        <span class="p">)</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Display the prompt configuration in the specified format.</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">            &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">            ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">            &gt;&gt;&gt; prompt_template.display(format=&quot;yaml&quot;)  # doctest: +NORMALIZE_WHITESPACE</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">            template: |-</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a><span class="sd">              Translate the following text to {{language}}:</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a><span class="sd">              {{text}}</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="sd">            template_variables:</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="sd">            - language</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a><span class="sd">            - text</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="sd">            metadata:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">              name: &quot;Simple Translator&quot;</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="sd">              description: &quot;A simple translation prompt for illustrating the standard prompt YAML</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">                format&quot;</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">              tags:</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">              - translation</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">              - multilinguality</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="sd">              version: &quot;0.0.1&quot;</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">              author: &quot;Guy van Babel&quot;</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="sd">            client_parameters: {}</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="sd">            custom_data: {}</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>        <span class="c1"># Create a clean dict with only the relevant attributes</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>        <span class="n">display_dict</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>            <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a>            <span class="s2">&quot;template_variables&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a>            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a>            <span class="s2">&quot;client_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a>            <span class="s2">&quot;custom_data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a>        <span class="p">}</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">display_dict</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>            <span class="c1"># Create a new YAML instance without version/tags output</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>            <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">YAML</span><span class="p">()</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>            <span class="n">yaml_handler</span><span class="o">.</span><span class="n">explicit_start</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>            <span class="n">yaml_handler</span><span class="o">.</span><span class="n">explicit_end</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>            <span class="n">yaml_handler</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>            <span class="c1"># Dump to string first to avoid stdout formatting issues</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>            <span class="n">output</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>            <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">display_dict</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>            <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>        <span class="c1"># Filter out private attributes (those starting with _)</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a>        <span class="n">public_attrs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)}</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span class="n">attributes</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&#39;&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">public_attrs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>        <span class="p">)</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">attributes</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_populate_placeholders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_part</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Recursively fill placeholders in strings or nested structures like dicts or lists.&quot;&quot;&quot;</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_part</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>            <span class="c1"># fill placeholders in strings</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="n">template_part</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_part</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>            <span class="c1"># Recursively handle dictionaries</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>            <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>                <span class="n">key</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_populate_placeholders</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">template_part</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>            <span class="p">}</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_part</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>            <span class="c1"># Recursively handle lists</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_populate_placeholders</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">template_part</span><span class="p">]</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>        <span class="k">return</span> <span class="n">template_part</span>  <span class="c1"># For non-string, non-dict, non-list types, return as is</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_user_provided_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that all required variables are provided by the user.</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">            user_provided_variables: Variables provided by user to populate template</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">            ValueError: If validation fails</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>        <span class="c1"># We know that template variables and template_variables are equal based on _validate_template_variables_equality, so we can validate against either</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>        <span class="n">required_variables</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>            <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_variables_in_template</span><span class="p">()</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>        <span class="p">)</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>        <span class="n">provided_variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">user_provided_variables</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>        <span class="c1"># Check for missing and unexpected variables</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>        <span class="n">missing_vars</span> <span class="o">=</span> <span class="n">required_variables</span> <span class="o">-</span> <span class="n">provided_variables</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a>        <span class="n">unexpected_vars</span> <span class="o">=</span> <span class="n">provided_variables</span> <span class="o">-</span> <span class="n">required_variables</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a>        <span class="k">if</span> <span class="n">missing_vars</span> <span class="ow">or</span> <span class="n">unexpected_vars</span><span class="p">:</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>            <span class="n">error_parts</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a>            <span class="k">if</span> <span class="n">missing_vars</span><span class="p">:</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>                <span class="n">error_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>                    <span class="sa">f</span><span class="s2">&quot;Missing required variables:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>                    <span class="sa">f</span><span class="s2">&quot;  Required: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">missing_vars</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>                    <span class="sa">f</span><span class="s2">&quot;  Provided: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">provided_variables</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>                <span class="p">)</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>            <span class="k">if</span> <span class="n">unexpected_vars</span><span class="p">:</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>                <span class="n">error_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>                    <span class="sa">f</span><span class="s2">&quot;Unexpected variables provided:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>                    <span class="sa">f</span><span class="s2">&quot;  Expected required variables: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">required_variables</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>                    <span class="sa">f</span><span class="s2">&quot;  Extra variables: </span><span class="si">{</span><span class="nb">sorted</span><span class="p">(</span><span class="n">unexpected_vars</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>                <span class="p">)</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">error_parts</span><span class="p">))</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_template_variables_equality</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that the declared template_variables and the actual variables in the template are identical.&quot;&quot;&quot;</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>        <span class="n">variables_in_template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_variables_in_template</span><span class="p">()</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>        <span class="n">template_variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span> <span class="ow">or</span> <span class="p">[])</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>        <span class="c1"># Check for mismatches</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>        <span class="n">undeclared_template_variables</span> <span class="o">=</span> <span class="n">variables_in_template</span> <span class="o">-</span> <span class="n">template_variables</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>        <span class="n">unused_template_variables</span> <span class="o">=</span> <span class="n">template_variables</span> <span class="o">-</span> <span class="n">variables_in_template</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>        <span class="k">if</span> <span class="n">undeclared_template_variables</span> <span class="ow">or</span> <span class="n">unused_template_variables</span><span class="p">:</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>            <span class="n">error_parts</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>            <span class="k">if</span> <span class="n">undeclared_template_variables</span><span class="p">:</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>                <span class="n">error_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>                    <span class="sa">f</span><span class="s2">&quot;template contains variables that are not declared in template_variables: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">undeclared_template_variables</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>                <span class="p">)</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>            <span class="k">if</span> <span class="n">unused_template_variables</span><span class="p">:</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>                <span class="n">error_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>                    <span class="sa">f</span><span class="s2">&quot;template_variables declares variables that are not used in template: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">unused_template_variables</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>                <span class="p">)</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>            <span class="n">template_extract</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)[:</span><span class="mi">100</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>            <span class="p">)</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>            <span class="n">error_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template extract: </span><span class="si">{</span><span class="n">template_extract</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">error_parts</span><span class="p">))</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_variables_in_template</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all variables used as placeholders in the template string or messages dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>        <span class="n">variables_in_template</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>            <span class="n">variables_in_template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span><span class="o">.</span><span class="n">get_variable_names</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">):</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>            <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">:</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>                <span class="n">content</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>                    <span class="n">variables_in_template</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span><span class="o">.</span><span class="n">get_variable_names</span><span class="p">(</span><span class="n">content</span><span class="p">))</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>                    <span class="c1"># Recursively search for variables in nested content</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>                        <span class="n">variables_in_template</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_variables_in_dict</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>        <span class="k">return</span> <span class="n">variables_in_template</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_get_variables_in_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Recursively extract variables from a dictionary structure.&quot;&quot;&quot;</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>        <span class="n">variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>                <span class="n">variables</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span><span class="o">.</span><span class="n">get_variable_names</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>                <span class="n">variables</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_variables_in_dict</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>                        <span class="n">variables</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_variables_in_dict</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>        <span class="k">return</span> <span class="n">variables</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_template_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the format of the template at initialization.&quot;&quot;&quot;</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">template</span><span class="p">):</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All messages in template must be dictionaries&quot;</span><span class="p">)</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>            <span class="n">required_keys</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">}</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>            <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">template</span><span class="p">:</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>                <span class="n">missing_keys</span> <span class="o">=</span> <span class="n">required_keys</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>                <span class="k">if</span> <span class="n">missing_keys</span><span class="p">:</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>                        <span class="sa">f</span><span class="s2">&quot;Each message must have a &#39;role&#39; and a &#39;content&#39; key. Missing keys: </span><span class="si">{</span><span class="n">missing_keys</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a>                    <span class="p">)</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Message &#39;role&#39; must be a string&quot;</span><span class="p">)</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>                <span class="c1"># Allow content to be either a string or a list of content items</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Message &#39;content&#39; must be either a string or a list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>                <span class="c1"># If content is a list, validate each item</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>                <span class="c1"># Can be list if passing images to OpenAI API</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a>                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a>                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a>                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each content item in a list must be a dictionary&quot;</span><span class="p">)</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a>                <span class="k">if</span> <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;assistant&quot;</span><span class="p">}:</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a>                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid role &#39;</span><span class="si">{</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;. Must be one of: system, user, assistant&quot;</span><span class="p">)</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_create_populator_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create populator instance.</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">            populator: Explicit populator type. Must be one of (&#39;jinja2&#39;, &#39;double_brace_regex&#39;, &#39;single_brace_regex&#39;).</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">            jinja2_security_level: Security level for Jinja2 populator</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a><span class="sd">            ValueError: If an unknown populator type is specified</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span><span class="p">:</span> <span class="n">TemplatePopulator</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>        <span class="k">if</span> <span class="n">populator</span> <span class="o">==</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">:</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span> <span class="o">=</span> <span class="n">Jinja2TemplatePopulator</span><span class="p">(</span><span class="n">security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">)</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>        <span class="k">elif</span> <span class="n">populator</span> <span class="o">==</span> <span class="s2">&quot;double_brace_regex&quot;</span><span class="p">:</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span> <span class="o">=</span> <span class="n">DoubleBracePopulator</span><span class="p">()</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>        <span class="k">elif</span> <span class="n">populator</span> <span class="o">==</span> <span class="s2">&quot;single_brace_regex&quot;</span><span class="p">:</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_populator_instance</span> <span class="o">=</span> <span class="n">SingleBracePopulator</span><span class="p">()</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a>                <span class="sa">f</span><span class="s2">&quot;Unknown populator type: </span><span class="si">{</span><span class="n">populator</span><span class="si">}</span><span class="s2">. Valid options are: jinja2, double_brace_regex, single_brace_regex&quot;</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>            <span class="p">)</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">BasePromptTemplate</span><span class="p">):</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>        <span class="k">return</span> <span class="p">(</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">metadata</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">client_parameters</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">custom_data</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">populator</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">populator</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.__init__" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">__init__</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="fm">__init__</span><span class="p">(</span><span class="nf">template</span><span class="p">,</span> <span class="n">template_variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">client_parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">custom_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="s1">&#39;jinja2&#39;</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize a prompt template.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>template</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template string or list of message dictionaries.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>template_variables</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of variables used in the template.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>metadata</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of metadata about the template.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>client_parameters</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of parameters for the inference client (e.g., temperature, model).</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>custom_data</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dictionary of custom data which does not fit into the other categories.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>populator</code></td>
          <td>
                <code><span title="prompt_templates.constants.PopulatorType">PopulatorType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The populator to use. Choose from Literal["jinja2", "double_brace_regex", "single_brace_regex"]. Defaults to "jinja2".</p>
            </div>
          </td>
          <td>
                <code>&#39;jinja2&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>jinja2_security_level</code></td>
          <td>
                <code><span title="prompt_templates.constants.Jinja2SecurityLevel">Jinja2SecurityLevel</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Security level for Jinja2 populator. Choose from Literal["strict", "standard", "relaxed"]. Defaults to "standard".</p>
            </div>
          </td>
          <td>
                <code>&#39;standard&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="n">template</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]],</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="n">template_variables</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="n">client_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="n">custom_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a prompt template.</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">        template: The template string or list of message dictionaries.</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        template_variables: List of variables used in the template.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        metadata: Dictionary of metadata about the template.</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        client_parameters: Dictionary of parameters for the inference client (e.g., temperature, model).</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        custom_data: Dictionary of custom data which does not fit into the other categories.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">        populator: The populator to use. Choose from Literal[&quot;jinja2&quot;, &quot;double_brace_regex&quot;, &quot;single_brace_regex&quot;]. Defaults to &quot;jinja2&quot;.</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        jinja2_security_level: Security level for Jinja2 populator. Choose from Literal[&quot;strict&quot;, &quot;standard&quot;, &quot;relaxed&quot;]. Defaults to &quot;standard&quot;.</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="c1"># Type validation</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="k">if</span> <span class="n">template_variables</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_variables</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;template_variables must be a list, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">template_variables</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;metadata must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="k">if</span> <span class="n">client_parameters</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">client_parameters</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;client_parameters must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">client_parameters</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="k">if</span> <span class="n">custom_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">custom_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;custom_data must be a dict, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">custom_data</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="c1"># Initialize attributes</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">template</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span> <span class="o">=</span> <span class="n">template_variables</span> <span class="ow">or</span> <span class="p">[]</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span> <span class="o">=</span> <span class="n">client_parameters</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span> <span class="o">=</span> <span class="n">custom_data</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">populator</span> <span class="o">=</span> <span class="n">populator</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">jinja2_security_level</span> <span class="o">=</span> <span class="n">jinja2_security_level</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="c1"># Validate template format</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_template_format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="c1"># Create populator instance</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_create_populator_instance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">populator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">jinja2_security_level</span><span class="p">)</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="c1"># Validate that variables provided in template and template_variables are equal</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">:</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_template_variables_equality</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.populate" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">populate</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Abstract method to populate the prompt template with user-provided variables.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>**user_provided_variables</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The values to fill placeholders in the template.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str | <span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>str | List[Dict[str, Any]]: The populated prompt content.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span>
<span class="normal"><a href="#__codelineno-0-97">97</a></span>
<span class="normal"><a href="#__codelineno-0-98">98</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="nd">@abstractmethod</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract method to populate the prompt template with user-provided variables.</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        **user_provided_variables: The values to fill placeholders in the template.</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">        str | List[Dict[str, Any]]: The populated prompt content.</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.load_from_local" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">load_from_local</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">load_from_local</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="s1">&#39;jinja2&#39;</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span> <span class="n">yaml_library</span><span class="o">=</span><span class="s1">&#39;ruamel&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Load a prompt template from a local YAML file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Path to the YAML file containing the prompt template</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>populator</code></td>
          <td>
                <code>[<span title="prompt_templates.constants.PopulatorType">PopulatorType</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The populator type to use among Literal["double_brace_regex", "single_brace_regex", "jinja2"]. Defaults to "jinja2".</p>
            </div>
          </td>
          <td>
                <code>&#39;jinja2&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>jinja2_security_level</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;strict&#39;, &#39;standard&#39;, &#39;relaxed&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The security level for the Jinja2 populator. Defaults to "standard".</p>
            </div>
          </td>
          <td>
                <code>&#39;standard&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>yaml_library</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The YAML library to use ("ruamel" or "pyyaml"). Defaults to "ruamel".</p>
            </div>
          </td>
          <td>
                <code>&#39;ruamel&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.TextPromptTemplate" href="#prompt_templates.prompt_templates.TextPromptTemplate">TextPromptTemplate</a>, <a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.ChatPromptTemplate" href="#prompt_templates.prompt_templates.ChatPromptTemplate">ChatPromptTemplate</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Union[TextPromptTemplate, ChatPromptTemplate]: The loaded template instance</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>FileNotFoundError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the file doesn't exist</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the file is not a .yaml/.yml file</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the YAML structure is invalid</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If attempting to load a text template with ChatPromptTemplate or vice versa</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <p>Download a text prompt template:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="o">.</span><span class="n">load_from_local</span><span class="p">(</span><span class="s2">&quot;./tests/test_data/example_prompts/translate.yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\n{{..., template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="go">&#39;Translate the following text to {{language}}:\n{{text}}&#39;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">[&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">&#39;Simple Translator&#39;</span>
</code></pre></div>
    <p>Download a chat prompt template:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">load_from_local</span><span class="p">(</span><span class="s2">&quot;./tests/test_data/example_prompts/code_teacher.yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a...&#39;, template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="go">[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">[&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">&#39;0.0.1&#39;</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_from_local</span><span class="p">(</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;relaxed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;TextPromptTemplate&quot;</span><span class="p">,</span> <span class="s2">&quot;ChatPromptTemplate&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a prompt template from a local YAML file.</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">        path (Union[str, Path]): Path to the YAML file containing the prompt template</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        populator ([PopulatorType]): The populator type to use among Literal[&quot;double_brace_regex&quot;, &quot;single_brace_regex&quot;, &quot;jinja2&quot;]. Defaults to &quot;jinja2&quot;.</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">        jinja2_security_level (Literal[&quot;strict&quot;, &quot;standard&quot;, &quot;relaxed&quot;], optional): The security level for the Jinja2 populator. Defaults to &quot;standard&quot;.</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        yaml_library (str, optional): The YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot;.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        Union[TextPromptTemplate, ChatPromptTemplate]: The loaded template instance</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">        FileNotFoundError: If the file doesn&#39;t exist</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">        ValueError: If the file is not a .yaml/.yml file</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">        ValueError: If the YAML structure is invalid</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">        ValueError: If attempting to load a text template with ChatPromptTemplate or vice versa</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">        Download a text prompt template:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">        &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_local(&quot;./tests/test_data/example_prompts/translate.yaml&quot;)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">        &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\\n{{..., template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">        &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">        [&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">        &gt;&gt;&gt; prompt_template.metadata[&#39;name&#39;]</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">        &#39;Simple Translator&#39;</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        Download a chat prompt template:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_local(&quot;./tests/test_data/example_prompts/code_teacher.yaml&quot;)</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">        &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a...&#39;, template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">        [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">        [&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">        &gt;&gt;&gt; prompt_template.metadata[&#39;version&#39;]</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">        &#39;0.0.1&#39;</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template file not found: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_PROMPT_EXTENSIONS</span><span class="p">:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Template file must be a .yaml or .yml file, got: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="n">yaml</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>            <span class="k">if</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>                <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>                <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>            <span class="sa">f</span><span class="s2">&quot;Failed to parse &#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&#39; as a valid YAML file. &quot;</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="sa">f</span><span class="s2">&quot;Please ensure the file is properly formatted.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span class="sa">f</span><span class="s2">&quot;Error details: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_template_type</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_load_template_from_dict</span><span class="p">(</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.load_from_hub" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">load_from_hub</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">load_from_hub</span><span class="p">(</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s1">&#39;dataset&#39;</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="s1">&#39;jinja2&#39;</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span> <span class="n">yaml_library</span><span class="o">=</span><span class="s1">&#39;ruamel&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Load a prompt template from the Hugging Face Hub.</p>
<p>Downloads and loads a prompt template from a repository on the Hugging Face Hub.
The template file should be a YAML file following the standardized format.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>repo_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The repository ID on Hugging Face Hub (e.g., 'username/repo')</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the YAML file containing the template</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>repo_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Type of repository. Must be one of
['dataset', 'model', 'space']. Defaults to "dataset"</p>
            </div>
          </td>
          <td>
                <code>&#39;dataset&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>revision</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Git revision to download from.
Can be a branch name, tag, or commit hash. Defaults to None</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>populator</code></td>
          <td>
                <code>[<span title="prompt_templates.constants.PopulatorType">PopulatorType</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The populator type to use among Literal["double_brace_regex", "single_brace_regex", "jinja2"]. Defaults to "jinja2".</p>
            </div>
          </td>
          <td>
                <code>&#39;jinja2&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>jinja2_security_level</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;strict&#39;, &#39;standard&#39;, &#39;relaxed&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The security level for the Jinja2 populator. Defaults to "standard".</p>
            </div>
          </td>
          <td>
                <code>&#39;standard&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>yaml_library</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The YAML library to use ("ruamel" or "pyyaml"). Defaults to "ruamel".</p>
            </div>
          </td>
          <td>
                <code>&#39;ruamel&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.TextPromptTemplate" href="#prompt_templates.prompt_templates.TextPromptTemplate">TextPromptTemplate</a>, <a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.ChatPromptTemplate" href="#prompt_templates.prompt_templates.ChatPromptTemplate">ChatPromptTemplate</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Union[TextPromptTemplate, ChatPromptTemplate]: The loaded template instance</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If repo_id format is invalid</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If repo_type is invalid</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>FileNotFoundError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If file cannot be downloaded from Hub</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the YAML structure is invalid</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If attempting to load a text template with ChatPromptTemplate or vice versa</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <p>Download a text prompt template:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\n{{...&#39;, template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="go">&#39;Translate the following text to {{language}}:\n{{text}}&#39;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="go">[&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">&#39;Simple Translator&#39;</span>
</code></pre></div>
    <p>Download a chat prompt template:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a...&#39;, template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="go">[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="go">[&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">&#39;0.0.1&#39;</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="n">repo_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span class="n">revision</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>    <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">,</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span> <span class="s2">&quot;relaxed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>    <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;TextPromptTemplate&quot;</span><span class="p">,</span> <span class="s2">&quot;ChatPromptTemplate&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a prompt template from the Hugging Face Hub.</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">    Downloads and loads a prompt template from a repository on the Hugging Face Hub.</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">    The template file should be a YAML file following the standardized format.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">        repo_id (str): The repository ID on Hugging Face Hub (e.g., &#39;username/repo&#39;)</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">        filename (str): Name of the YAML file containing the template</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">        repo_type (str, optional): Type of repository. Must be one of</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">            [&#39;dataset&#39;, &#39;model&#39;, &#39;space&#39;]. Defaults to &quot;dataset&quot;</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">        revision (Optional[str], optional): Git revision to download from.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">            Can be a branch name, tag, or commit hash. Defaults to None</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">        populator ([PopulatorType]): The populator type to use among Literal[&quot;double_brace_regex&quot;, &quot;single_brace_regex&quot;, &quot;jinja2&quot;]. Defaults to &quot;jinja2&quot;.</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">        jinja2_security_level (Literal[&quot;strict&quot;, &quot;standard&quot;, &quot;relaxed&quot;], optional): The security level for the Jinja2 populator. Defaults to &quot;standard&quot;.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        yaml_library (str, optional): The YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot;.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">        Union[TextPromptTemplate, ChatPromptTemplate]: The loaded template instance</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">        ValueError: If repo_id format is invalid</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">        ValueError: If repo_type is invalid</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        FileNotFoundError: If file cannot be downloaded from Hub</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">        ValueError: If the YAML structure is invalid</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">        ValueError: If attempting to load a text template with ChatPromptTemplate or vice versa</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="sd">        Download a text prompt template:</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">        &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">        ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">        &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">        TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\\n{{...&#39;, template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">        &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">        [&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">        &gt;&gt;&gt; prompt_template.metadata[&#39;name&#39;]</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">        &#39;Simple Translator&#39;</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">        Download a chat prompt template:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">        ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">        ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a...&#39;, template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ...&#39;, client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">        [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">        [&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">        &gt;&gt;&gt; prompt_template.metadata[&#39;version&#39;]</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">        &#39;0.0.1&#39;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span class="c1"># Validate Hub parameters</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>        <span class="n">validate_repo_id</span><span class="p">(</span><span class="n">repo_id</span><span class="p">)</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid repo_id format: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>    <span class="k">if</span> <span class="n">repo_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;space&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;repo_type must be one of [&#39;dataset&#39;, &#39;model&#39;, &#39;space&#39;], got </span><span class="si">{</span><span class="n">repo_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="c1"># Ensure .yaml extension</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">VALID_PROMPT_EXTENSIONS</span><span class="p">):</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span class="n">filename</span> <span class="o">+=</span> <span class="s2">&quot;.yaml&quot;</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">hf_hub_download</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">)</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to download template from Hub: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="n">yaml</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>            <span class="k">if</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">:</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>                <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>                <span class="n">prompt_file_dic</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>            <span class="sa">f</span><span class="s2">&quot;Failed to parse &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; as a valid YAML file. &quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>            <span class="sa">f</span><span class="s2">&quot;Please ensure the file is properly formatted.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>            <span class="sa">f</span><span class="s2">&quot;Error details: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>        <span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="n">file_info</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; from &#39;</span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>    <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_template_type</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">file_info</span><span class="p">)</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_load_template_from_dict</span><span class="p">(</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.save_to_local" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">save_to_local</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">save_to_local</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">yaml_library</span><span class="o">=</span><span class="s1">&#39;ruamel&#39;</span><span class="p">,</span> <span class="n">prettify_template</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Save the prompt template as a local YAML or JSON file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Path where to save the file. Can be string or Path object</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>format</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;yaml&#39;, &#39;json&#39;]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Output format ("yaml" or "json"). If None, inferred from filename</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>yaml_library</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>YAML library to use ("ruamel" or "pyyaml"). Defaults to "ruamel" for better formatting and format preservation.</p>
            </div>
          </td>
          <td>
                <code>&#39;ruamel&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>prettify_template</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If true format the template content with literal block scalars, i.e. "|-" in yaml.
This makes the string behave like a Python '''...''' block to make strings easier to read and edit.
Defaults to True</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages_template</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;</span><span class="p">},</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Explain what {{concept}} is in {{programming_language}}.&quot;</span><span class="p">}</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">template_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;concept&quot;</span><span class="p">,</span> <span class="s2">&quot;programming_language&quot;</span><span class="p">]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Teacher&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A simple chat prompt for explaining programming concepts with examples&quot;</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span>    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;programming&quot;</span><span class="p">,</span> <span class="s2">&quot;education&quot;</span><span class="p">],</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">... </span>    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;My Awesome Company&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span><span class="p">}</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="n">messages_template</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span>    <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">save_to_local</span><span class="p">(</span><span class="s2">&quot;./tests/test_data/example_prompts/code_teacher_test.yaml&quot;</span><span class="p">)</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="k">def</span><span class="w"> </span><span class="nf">save_to_local</span><span class="p">(</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>    <span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>    <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>    <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>    <span class="n">prettify_template</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the prompt template as a local YAML or JSON file.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">        path: Path where to save the file. Can be string or Path object</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">        format: Output format (&quot;yaml&quot; or &quot;json&quot;). If None, inferred from filename</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">        yaml_library: YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot; for better formatting and format preservation.</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">        prettify_template: If true format the template content with literal block scalars, i.e. &quot;|-&quot; in yaml.</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">            This makes the string behave like a Python &#39;&#39;&#39;...&#39;&#39;&#39; block to make strings easier to read and edit.</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">            Defaults to True</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">        &gt;&gt;&gt; messages_template = [</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">        ...     {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;},</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">        ...     {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Explain what {{concept}} is in {{programming_language}}.&quot;}</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">        ... ]</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">        &gt;&gt;&gt; template_variables = [&quot;concept&quot;, &quot;programming_language&quot;]</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">        &gt;&gt;&gt; metadata = {</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">        ...     &quot;name&quot;: &quot;Code Teacher&quot;,</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">        ...     &quot;description&quot;: &quot;A simple chat prompt for explaining programming concepts with examples&quot;,</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">        ...     &quot;tags&quot;: [&quot;programming&quot;, &quot;education&quot;],</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">        ...     &quot;version&quot;: &quot;0.0.1&quot;,</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">        ...     &quot;author&quot;: &quot;My Awesome Company&quot;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">        ... }</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate(</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">        ...     template=messages_template,</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">        ...     template_variables=template_variables,</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">        ...     metadata=metadata,</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a><span class="sd">        &gt;&gt;&gt; prompt_template.save_to_local(&quot;./tests/test_data/example_prompts/code_teacher_test.yaml&quot;)  # doctest: +SKIP</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="c1"># Handle format inference and validation</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="n">file_extension</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>    <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>        <span class="c1"># Infer format from extension</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>        <span class="k">if</span> <span class="n">file_extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;yaml&quot;</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>        <span class="k">elif</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot infer format from file extension: </span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>        <span class="c1"># Validate explicitly provided format matches file extension</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">file_extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>            <span class="c1"># Both are YAML variants, so they match</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>            <span class="k">pass</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>        <span class="k">elif</span> <span class="nb">format</span> <span class="o">!=</span> <span class="n">file_extension</span><span class="p">:</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Provided format &#39;</span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&#39; does not match file extension &#39;</span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>        <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>            <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>            <span class="s2">&quot;template_variables&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>            <span class="s2">&quot;client_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>            <span class="s2">&quot;custom_data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>        <span class="p">}</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>    <span class="p">}</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="k">if</span> <span class="n">prettify_template</span><span class="p">:</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_template_content</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">])</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># yaml</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>            <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>            <span class="k">if</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">:</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>                <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>            <span class="k">elif</span> <span class="n">yaml_library</span> <span class="o">==</span> <span class="s2">&quot;pyyaml&quot;</span><span class="p">:</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>                <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allow_unicode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>                    <span class="sa">f</span><span class="s2">&quot;Unknown yaml library: </span><span class="si">{</span><span class="n">yaml_library</span><span class="si">}</span><span class="s2">. Valid options are: &#39;ruamel&#39; (default) or &#39;pyyaml&#39;.&quot;</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>                <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.save_to_hub" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">save_to_hub</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">save_to_hub</span><span class="p">(</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="s1">&#39;dataset&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">yaml_library</span><span class="o">=</span><span class="s1">&#39;ruamel&#39;</span><span class="p">,</span> <span class="n">prettify_template</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">create_repo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">resource_group_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">create_pr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">commit_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">commit_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_commit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Save the prompt template to the Hugging Face Hub as a YAML or JSON file.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>repo_id</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The repository ID on the Hugging Face Hub (e.g., "username/repo-name")</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filename</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the file to save (e.g., "prompt.yaml" or "prompt.json")</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>repo_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Type of repository ("dataset", "model", or "space"). Defaults to "dataset"</p>
            </div>
          </td>
          <td>
                <code>&#39;dataset&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>token</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Hugging Face API token. If None, will use token from environment</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>commit_message</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Custom commit message. If None, uses default message</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>create_repo</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to create the repository if it doesn't exist. Defaults to False</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>format</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Literal">Literal</span>[&#39;yaml&#39;, &#39;json&#39;]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Output format ("yaml" or "json"). If None, inferred from filename extension</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>yaml_library</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>YAML library to use ("ruamel" or "pyyaml"). Defaults to "ruamel" for better formatting and format preservation.</p>
            </div>
          </td>
          <td>
                <code>&#39;ruamel&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>prettify_template</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If true format the template content with literal block scalars, i.e. "|-" in yaml.
This makes the string behave like a Python '''...''' block to make strings easier to read and edit.
Defaults to True</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>private</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to create a private repository. Defaults to False</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>resource_group_id</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Optional resource group ID to associate with the repository</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>revision</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Optional branch/revision to push to. Defaults to main branch</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>create_pr</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to create a Pull Request instead of pushing directly. Defaults to False</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>commit_description</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Optional commit description</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>parent_commit</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Optional parent commit to create PR from</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>CommitInfo</code></td>          <td>
                <code><span title="huggingface_hub.hf_api.CommitInfo">CommitInfo</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Information about the commit/PR</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages_template</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;</span><span class="p">},</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Explain what {{concept}} is in {{programming_language}}.&quot;</span><span class="p">}</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">template_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;concept&quot;</span><span class="p">,</span> <span class="s2">&quot;programming_language&quot;</span><span class="p">]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Teacher&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A simple chat prompt for explaining programming concepts with examples&quot;</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span>    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;programming&quot;</span><span class="p">,</span> <span class="s2">&quot;education&quot;</span><span class="p">],</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">... </span>    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;My Awesome Company&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span><span class="p">}</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="n">messages_template</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span>    <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">save_to_hub</span><span class="p">(</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts_test&quot;</span><span class="p">,</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;code_teacher_test.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">... </span>    <span class="c1">#create_repo=True,  # if the repo does not exist, create it</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="gp">... </span>    <span class="c1">#private=True,  # if you want to create a private repo</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="gp">... </span>    <span class="c1">#token=&quot;hf_...&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="gp">... </span><span class="p">)</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="k">def</span><span class="w"> </span><span class="nf">save_to_hub</span><span class="p">(</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>    <span class="n">repo_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>    <span class="n">repo_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;dataset&quot;</span><span class="p">,</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>    <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>    <span class="n">yaml_library</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ruamel&quot;</span><span class="p">,</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>    <span class="n">prettify_template</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>    <span class="n">token</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>    <span class="n">create_repo</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>    <span class="n">private</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>    <span class="n">resource_group_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>    <span class="n">revision</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="n">create_pr</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>    <span class="n">commit_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>    <span class="n">commit_description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="n">parent_commit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommitInfo</span><span class="p">:</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the prompt template to the Hugging Face Hub as a YAML or JSON file.</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">        repo_id: The repository ID on the Hugging Face Hub (e.g., &quot;username/repo-name&quot;)</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">        filename: Name of the file to save (e.g., &quot;prompt.yaml&quot; or &quot;prompt.json&quot;)</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">        repo_type: Type of repository (&quot;dataset&quot;, &quot;model&quot;, or &quot;space&quot;). Defaults to &quot;dataset&quot;</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">        token: Hugging Face API token. If None, will use token from environment</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">        commit_message: Custom commit message. If None, uses default message</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">        create_repo: Whether to create the repository if it doesn&#39;t exist. Defaults to False</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="sd">        format: Output format (&quot;yaml&quot; or &quot;json&quot;). If None, inferred from filename extension</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">        yaml_library: YAML library to use (&quot;ruamel&quot; or &quot;pyyaml&quot;). Defaults to &quot;ruamel&quot; for better formatting and format preservation.</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">        prettify_template: If true format the template content with literal block scalars, i.e. &quot;|-&quot; in yaml.</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">            This makes the string behave like a Python &#39;&#39;&#39;...&#39;&#39;&#39; block to make strings easier to read and edit.</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">            Defaults to True</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a><span class="sd">        private: Whether to create a private repository. Defaults to False</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">        resource_group_id: Optional resource group ID to associate with the repository</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">        revision: Optional branch/revision to push to. Defaults to main branch</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">        create_pr: Whether to create a Pull Request instead of pushing directly. Defaults to False</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">        commit_description: Optional commit description</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">        parent_commit: Optional parent commit to create PR from</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">        CommitInfo: Information about the commit/PR</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">        &gt;&gt;&gt; messages_template = [</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">        ...     {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;},</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="sd">        ...     {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Explain what {{concept}} is in {{programming_language}}.&quot;}</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">        ... ]</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">        &gt;&gt;&gt; template_variables = [&quot;concept&quot;, &quot;programming_language&quot;]</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">        &gt;&gt;&gt; metadata = {</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">        ...     &quot;name&quot;: &quot;Code Teacher&quot;,</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">        ...     &quot;description&quot;: &quot;A simple chat prompt for explaining programming concepts with examples&quot;,</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">        ...     &quot;tags&quot;: [&quot;programming&quot;, &quot;education&quot;],</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="sd">        ...     &quot;version&quot;: &quot;0.0.1&quot;,</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">        ...     &quot;author&quot;: &quot;My Awesome Company&quot;</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        ... }</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate(</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">        ...     template=messages_template,</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">        ...     template_variables=template_variables,</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">        ...     metadata=metadata,</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">        &gt;&gt;&gt; prompt_template.save_to_hub(  # doctest: +SKIP</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts_test&quot;,</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">        ...     filename=&quot;code_teacher_test.yaml&quot;,</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">        ...     #create_repo=True,  # if the repo does not exist, create it</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">        ...     #private=True,  # if you want to create a private repo</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">        ...     #token=&quot;hf_...&quot;</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>    <span class="c1"># Handle format inference and validation</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>    <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>        <span class="c1"># Infer format from extension</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="n">extension</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>        <span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;yaml&quot;</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="k">elif</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;yaml&quot;</span>  <span class="c1"># default if no extension</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>            <span class="n">filename</span> <span class="o">+=</span> <span class="s2">&quot;.yaml&quot;</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>        <span class="c1"># Validate explicitly provided format matches file extension</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported format: </span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>        <span class="n">file_extension</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>        <span class="k">if</span> <span class="nb">format</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">file_extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>            <span class="c1"># Both are YAML variants, so they match</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>            <span class="k">pass</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>        <span class="k">elif</span> <span class="nb">format</span> <span class="o">!=</span> <span class="n">file_extension</span><span class="p">:</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Provided format &#39;</span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2">&#39; does not match file extension &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>    <span class="c1"># Convert template to the specified format</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>        <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>            <span class="s2">&quot;template_variables&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>            <span class="s2">&quot;client_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>            <span class="s2">&quot;custom_data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>        <span class="p">}</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>    <span class="p">}</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>    <span class="k">if</span> <span class="n">prettify_template</span><span class="p">:</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_template_content</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">][</span><span class="s2">&quot;template&quot;</span><span class="p">])</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>        <span class="n">content</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>        <span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>    <span class="k">else</span><span class="p">:</span>  <span class="c1"># yaml</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>        <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="n">yaml_library</span><span class="p">)</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>        <span class="n">string_stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>        <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">string_stream</span><span class="p">)</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>        <span class="n">content</span> <span class="o">=</span> <span class="n">string_stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>        <span class="n">content_bytes</span> <span class="o">=</span> <span class="n">content</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>    <span class="c1"># Upload to Hub</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>    <span class="n">api</span> <span class="o">=</span> <span class="n">HfApi</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>    <span class="c1"># Check if repo exists before attempting to create it to avoid overwriting repo card</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>        <span class="n">api</span><span class="o">.</span><span class="n">repo_info</span><span class="p">(</span><span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span> <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">)</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>        <span class="n">repo_exists</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>    <span class="k">except</span> <span class="n">RepositoryNotFoundError</span><span class="p">:</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>        <span class="n">repo_exists</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>    <span class="k">if</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>            <span class="sa">f</span><span class="s2">&quot;You specified create_repo=</span><span class="si">{</span><span class="n">create_repo</span><span class="si">}</span><span class="s2">, but repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2"> already exists. &quot;</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>            <span class="s2">&quot;Skipping repo creation.&quot;</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>        <span class="p">)</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>    <span class="k">elif</span> <span class="ow">not</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2"> does not exist. Set create_repo=True to create it.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>    <span class="k">elif</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating/Updating HF Hub repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>        <span class="n">api</span><span class="o">.</span><span class="n">create_repo</span><span class="p">(</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>            <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>            <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>            <span class="n">private</span><span class="o">=</span><span class="n">private</span><span class="p">,</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>            <span class="c1"># exist_ok=exist_ok,  # not using this arg to avoid inconsistency</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>            <span class="n">resource_group_id</span><span class="o">=</span><span class="n">resource_group_id</span><span class="p">,</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>        <span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>        <span class="n">repocard_text</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>            <span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>            <span class="s2">&quot;library_name: prompt-templates</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>            <span class="s2">&quot;tags:</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>            <span class="s2">&quot;- prompts</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>            <span class="s2">&quot;- prompt-templates</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>            <span class="s2">&quot;---</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>            <span class="s2">&quot;This repository was created with the `prompt-templates` library and contains</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>            <span class="s2">&quot;prompt templates in the `Files` tab.</span><span class="se">\n</span><span class="s2">&quot;</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>            <span class="s2">&quot;For easily reusing these templates, see the [documentation](https://github.com/MoritzLaurer/prompt-templates).&quot;</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>        <span class="p">)</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>        <span class="n">card</span> <span class="o">=</span> <span class="n">RepoCard</span><span class="p">(</span><span class="n">repocard_text</span><span class="p">)</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>        <span class="n">card</span><span class="o">.</span><span class="n">push_to_hub</span><span class="p">(</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>            <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>            <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>            <span class="n">commit_message</span><span class="o">=</span><span class="s2">&quot;Create/Update repo card with prompt-templates library&quot;</span><span class="p">,</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>            <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>            <span class="n">parent_commit</span><span class="o">=</span><span class="n">parent_commit</span><span class="p">,</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>        <span class="p">)</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>    <span class="k">elif</span> <span class="ow">not</span> <span class="n">create_repo</span> <span class="ow">and</span> <span class="n">repo_exists</span><span class="p">:</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>        <span class="c1"># Update repo metadata to make prompt templates discoverable on the HF Hub</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating HF Hub repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2"> with prompt-templates library metadata.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>        <span class="n">metadata_update</span><span class="p">(</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>            <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>            <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;library_name&quot;</span><span class="p">:</span> <span class="s2">&quot;prompt-templates&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;prompts&quot;</span><span class="p">,</span> <span class="s2">&quot;prompt-templates&quot;</span><span class="p">]},</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>            <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>            <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>            <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>            <span class="n">commit_message</span><span class="o">=</span><span class="n">commit_message</span> <span class="ow">or</span> <span class="s2">&quot;Update repo metadata with prompt-templates library&quot;</span><span class="p">,</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>            <span class="n">commit_description</span><span class="o">=</span><span class="n">commit_description</span><span class="p">,</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>            <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>            <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>            <span class="n">parent_commit</span><span class="o">=</span><span class="n">parent_commit</span><span class="p">,</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>        <span class="p">)</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>    <span class="c1"># Upload file</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uploading prompt template </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> to HF Hub repository </span><span class="si">{</span><span class="n">repo_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>    <span class="k">return</span> <span class="n">api</span><span class="o">.</span><span class="n">upload_file</span><span class="p">(</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>        <span class="n">path_or_fileobj</span><span class="o">=</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">content_bytes</span><span class="p">),</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>        <span class="n">path_in_repo</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span class="n">repo_id</span><span class="o">=</span><span class="n">repo_id</span><span class="p">,</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>        <span class="n">repo_type</span><span class="o">=</span><span class="n">repo_type</span><span class="p">,</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>        <span class="n">token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>        <span class="n">commit_message</span><span class="o">=</span><span class="n">commit_message</span> <span class="ow">or</span> <span class="sa">f</span><span class="s2">&quot;Upload prompt template </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>        <span class="n">commit_description</span><span class="o">=</span><span class="n">commit_description</span><span class="p">,</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>        <span class="n">revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>        <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>        <span class="n">parent_commit</span><span class="o">=</span><span class="n">parent_commit</span><span class="p">,</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.BasePromptTemplate.display" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">display</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">display</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Display the prompt configuration in the specified format.</p>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">template: |-</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">  Translate the following text to {{language}}:</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="go">  {{text}}</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">template_variables:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="go">- language</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">- text</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">metadata:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="go">  name: &quot;Simple Translator&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="go">  description: &quot;A simple translation prompt for illustrating the standard prompt YAML</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="go">    format&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="go">  tags:</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="go">  - translation</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="go">  - multilinguality</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="go">  version: &quot;0.0.1&quot;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="go">  author: &quot;Guy van Babel&quot;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="go">client_parameters: {}</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="go">custom_data: {}</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="k">def</span><span class="w"> </span><span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Display the prompt configuration in the specified format.</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">        &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">        ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">        &gt;&gt;&gt; prompt_template.display(format=&quot;yaml&quot;)  # doctest: +NORMALIZE_WHITESPACE</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">        template: |-</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a><span class="sd">          Translate the following text to {{language}}:</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a><span class="sd">          {{text}}</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="sd">        template_variables:</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="sd">        - language</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a><span class="sd">        - text</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a><span class="sd">        metadata:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">          name: &quot;Simple Translator&quot;</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="sd">          description: &quot;A simple translation prompt for illustrating the standard prompt YAML</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">            format&quot;</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">          tags:</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">          - translation</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">          - multilinguality</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a><span class="sd">          version: &quot;0.0.1&quot;</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a><span class="sd">          author: &quot;Guy van Babel&quot;</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="sd">        client_parameters: {}</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="sd">        custom_data: {}</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>    <span class="c1"># Create a clean dict with only the relevant attributes</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>    <span class="n">display_dict</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>        <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a>        <span class="s2">&quot;template_variables&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a>        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a>        <span class="s2">&quot;client_parameters&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a>        <span class="s2">&quot;custom_data&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a>    <span class="p">}</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">display_dict</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>    <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;yaml&quot;</span><span class="p">:</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>        <span class="c1"># Create a new YAML instance without version/tags output</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>        <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">YAML</span><span class="p">()</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>        <span class="n">yaml_handler</span><span class="o">.</span><span class="n">explicit_start</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>        <span class="n">yaml_handler</span><span class="o">.</span><span class="n">explicit_end</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>        <span class="n">yaml_handler</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>        <span class="c1"># Dump to string first to avoid stdout formatting issues</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="n">output</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>        <span class="n">yaml_handler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">display_dict</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h3 id="prompt_templates.prompt_templates.TextPromptTemplate" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">TextPromptTemplate</span>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.BasePromptTemplate" href="#prompt_templates.prompt_templates.BasePromptTemplate">BasePromptTemplate</a></code></p>

  
      <p>A class representing a standard text prompt template.</p>



<p><strong>Examples:</strong></p>
    <p>Instantiate a text prompt template:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">template_text</span> <span class="o">=</span> <span class="s2">&quot;Translate the following text to {{language}}:</span><span class="se">\n</span><span class="s2">{{text}}&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">template_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">]</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Simple Translator&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A simple translation prompt for illustrating the standard prompt YAML format&quot;</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;translation&quot;</span><span class="p">,</span> <span class="s2">&quot;multilinguality&quot;</span><span class="p">],</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Guy van Babel&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span><span class="p">}</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="n">template_text</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span>    <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">... </span>    <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="go">TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\n{{..., template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Inspect template attributes</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">&#39;Translate the following text to {{language}}:\n{{text}}&#39;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="go">[&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">&#39;Simple Translator&#39;</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Populate the template</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">language</span><span class="o">=</span><span class="s2">&quot;French&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Hello world!&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">Translate the following text to French:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">Hello world!</span>
</code></pre></div>
    <p>Or download the same text prompt template from the Hub:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template_downloaded</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template_downloaded</span> <span class="o">==</span> <span class="n">prompt_template</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">True</span>
</code></pre></div>

            <details class="quote">
              <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-930" name="__codelineno-0-930"></a><span class="k">class</span><span class="w"> </span><span class="nc">TextPromptTemplate</span><span class="p">(</span><span class="n">BasePromptTemplate</span><span class="p">):</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A class representing a standard text prompt template.</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a><span class="sd">        Instantiate a text prompt template:</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a><span class="sd">        &gt;&gt;&gt; template_text = &quot;Translate the following text to {{language}}:\\n{{text}}&quot;</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a><span class="sd">        &gt;&gt;&gt; template_variables = [&quot;language&quot;, &quot;text&quot;]</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a><span class="sd">        &gt;&gt;&gt; metadata = {</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a><span class="sd">        ...     &quot;name&quot;: &quot;Simple Translator&quot;,</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a><span class="sd">        ...     &quot;description&quot;: &quot;A simple translation prompt for illustrating the standard prompt YAML format&quot;,</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a><span class="sd">        ...     &quot;tags&quot;: [&quot;translation&quot;, &quot;multilinguality&quot;],</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a><span class="sd">        ...     &quot;version&quot;: &quot;0.0.1&quot;,</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a><span class="sd">        ...     &quot;author&quot;: &quot;Guy van Babel&quot;</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a><span class="sd">        ... }</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="sd">        &gt;&gt;&gt; prompt_template = TextPromptTemplate(</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="sd">        ...     template=template_text,</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a><span class="sd">        ...     template_variables=template_variables,</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="sd">        ...     metadata=metadata</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">        &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="sd">        TextPromptTemplate(template=&#39;Translate the following text to {{language}}:\\n{{..., template_variables=[&#39;language&#39;, &#39;text&#39;], metadata={&#39;name&#39;: &#39;Simple Translator&#39;, &#39;description&#39;: &#39;A si..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a><span class="sd">        &gt;&gt;&gt; # Inspect template attributes</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">        &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">        [&#39;language&#39;, &#39;text&#39;]</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">        &gt;&gt;&gt; prompt_template.metadata[&#39;name&#39;]</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">        &#39;Simple Translator&#39;</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">        &gt;&gt;&gt; # Populate the template</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="sd">        &gt;&gt;&gt; prompt = prompt_template.populate(</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="sd">        ...     language=&quot;French&quot;,</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="sd">        ...     text=&quot;Hello world!&quot;</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="sd">        &gt;&gt;&gt; print(prompt)</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a><span class="sd">        Translate the following text to French:</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a><span class="sd">        Hello world!</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a><span class="sd">        Or download the same text prompt template from the Hub:</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a><span class="sd">        &gt;&gt;&gt; prompt_template_downloaded = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a><span class="sd">        ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a><span class="sd">        &gt;&gt;&gt; prompt_template_downloaded == prompt_template</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a><span class="sd">        True</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>        <span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>        <span class="n">template_variables</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>        <span class="n">client_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>        <span class="n">custom_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a>            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a>            <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a>            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a>            <span class="n">client_parameters</span><span class="o">=</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a>            <span class="n">custom_data</span><span class="o">=</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>            <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>            <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a>        <span class="p">)</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Populate the prompt by replacing placeholders with provided values.</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><span class="sd">            &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">            ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="sd">            &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">            &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">            &gt;&gt;&gt; prompt = prompt_template.populate(</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">            ...     language=&quot;French&quot;,</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a><span class="sd">            ...     text=&quot;Hello world!&quot;</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">            &gt;&gt;&gt; print(prompt)</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="sd">            Translate the following text to French:</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><span class="sd">            Hello world!</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a><span class="sd">            **user_provided_variables: The values to fill placeholders in the prompt template.</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">            str: The populated prompt string.</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_user_provided_variables</span><span class="p">(</span><span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>        <span class="n">populated_prompt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_populate_placeholders</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">))</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>        <span class="k">return</span> <span class="n">populated_prompt</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_langchain_template</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LC_PromptTemplate&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the TextPromptTemplate to a LangChain PromptTemplate.</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><span class="sd">            &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="sd">            ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><span class="sd">            &gt;&gt;&gt; lc_template = prompt_template.to_langchain_template()</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a><span class="sd">            &gt;&gt;&gt; # test equivalence</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a><span class="sd">            &gt;&gt;&gt; from langchain_core.prompts import PromptTemplate as LC_PromptTemplate</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a><span class="sd">            &gt;&gt;&gt; isinstance(lc_template, LC_PromptTemplate)</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a><span class="sd">            True</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a><span class="sd">            PromptTemplate: A LangChain PromptTemplate object.</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="sd">            ImportError: If LangChain is not installed.</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.prompts</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptTemplate</span> <span class="k">as</span> <span class="n">LC_PromptTemplate</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>        <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;LangChain is not installed. Please install it with &#39;pip install langchain&#39;&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>        <span class="k">return</span> <span class="n">LC_PromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>            <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>            <span class="n">input_variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>            <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.TextPromptTemplate.populate" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">populate</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Populate the prompt by replacing placeholders with provided values.</p>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">&#39;Translate the following text to {{language}}:\n{{text}}&#39;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="n">language</span><span class="o">=</span><span class="s2">&quot;French&quot;</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span>    <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Hello world!&quot;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="go">Translate the following text to French:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="go">Hello world!</span>
</code></pre></div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>**user_provided_variables</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The values to fill placeholders in the prompt template.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The populated prompt string.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1000" name="__codelineno-0-1000"></a><span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Populate the prompt by replacing placeholders with provided values.</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><span class="sd">        &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">        ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">        &#39;Translate the following text to {{language}}:\\n{{text}}&#39;</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">        &gt;&gt;&gt; prompt = prompt_template.populate(</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">        ...     language=&quot;French&quot;,</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a><span class="sd">        ...     text=&quot;Hello world!&quot;</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">        &gt;&gt;&gt; print(prompt)</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a><span class="sd">        Translate the following text to French:</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><span class="sd">        Hello world!</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a><span class="sd">        **user_provided_variables: The values to fill placeholders in the prompt template.</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a><span class="sd">        str: The populated prompt string.</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_user_provided_variables</span><span class="p">(</span><span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>    <span class="n">populated_prompt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_populate_placeholders</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">user_provided_variables</span><span class="p">))</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>    <span class="k">return</span> <span class="n">populated_prompt</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.TextPromptTemplate.to_langchain_template" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">to_langchain_template</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">to_langchain_template</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the TextPromptTemplate to a LangChain PromptTemplate.</p>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">lc_template</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">to_langchain_template</span><span class="p">()</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># test equivalence</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.prompts</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptTemplate</span> <span class="k">as</span> <span class="n">LC_PromptTemplate</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">lc_template</span><span class="p">,</span> <span class="n">LC_PromptTemplate</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">True</span>
</code></pre></div>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PromptTemplate</code></td>          <td>
                <code><span title="langchain_core.prompts.PromptTemplate">PromptTemplate</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LangChain PromptTemplate object.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ImportError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If LangChain is not installed.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_langchain_template</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LC_PromptTemplate&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the TextPromptTemplate to a LangChain PromptTemplate.</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import TextPromptTemplate</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a><span class="sd">        &gt;&gt;&gt; prompt_template = TextPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="sd">        ...     filename=&quot;translate.yaml&quot;</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a><span class="sd">        &gt;&gt;&gt; lc_template = prompt_template.to_langchain_template()</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a><span class="sd">        &gt;&gt;&gt; # test equivalence</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a><span class="sd">        &gt;&gt;&gt; from langchain_core.prompts import PromptTemplate as LC_PromptTemplate</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a><span class="sd">        &gt;&gt;&gt; isinstance(lc_template, LC_PromptTemplate)</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a><span class="sd">        True</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a><span class="sd">        PromptTemplate: A LangChain PromptTemplate object.</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="sd">        ImportError: If LangChain is not installed.</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.prompts</span><span class="w"> </span><span class="kn">import</span> <span class="n">PromptTemplate</span> <span class="k">as</span> <span class="n">LC_PromptTemplate</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;LangChain is not installed. Please install it with &#39;pip install langchain&#39;&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>    <span class="k">return</span> <span class="n">LC_PromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>        <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>        <span class="n">input_variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>        <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h3 id="prompt_templates.prompt_templates.ChatPromptTemplate" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">ChatPromptTemplate</span>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.BasePromptTemplate" href="#prompt_templates.prompt_templates.BasePromptTemplate">BasePromptTemplate</a></code></p>

  
      <p>A class representing a chat prompt template that can be formatted for and used with various LLM clients.</p>



<p><strong>Examples:</strong></p>
    <p>Instantiate a chat prompt template:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">template_messages</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;</span><span class="p">},</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Explain what {{concept}} is in {{programming_language}}.&quot;</span><span class="p">}</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">]</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">template_variables</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;concept&quot;</span><span class="p">,</span> <span class="s2">&quot;programming_language&quot;</span><span class="p">]</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Teacher&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A simple chat prompt for explaining programming concepts with examples&quot;</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span>    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;programming&quot;</span><span class="p">,</span> <span class="s2">&quot;education&quot;</span><span class="p">],</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">... </span>    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Guido van Bossum&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span><span class="p">}</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="gp">... </span>    <span class="n">template</span><span class="o">=</span><span class="n">template_messages</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="gp">... </span>    <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="gp">... </span>    <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="go">ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a..., template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Inspect template attributes</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="go">[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span><span class="o">.</span><span class="n">template_variables</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="go">[&#39;concept&#39;, &#39;programming_language&#39;]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Populate the template</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">concept</span><span class="o">=</span><span class="s2">&quot;list comprehension&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">programming_language</span><span class="o">=</span><span class="s2">&quot;Python&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># By default, the populated prompt is in the OpenAI messages format, as it is adopted by many open-source libraries</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># You can convert to formats used by other LLM clients like Anthropic&#39;s or Google Gemini&#39;s like this:</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">format_for_client</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages_anthropic</span> <span class="o">=</span> <span class="n">format_for_client</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="s2">&quot;anthropic&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">messages_anthropic</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="go">{&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Convenience method to populate and format in one step for clients that do not use the OpenAI messages format</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages_anthropic</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">create_messages</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">client</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">concept</span><span class="o">=</span><span class="s2">&quot;list comprehension&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">programming_language</span><span class="o">=</span><span class="s2">&quot;Python&quot;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">messages_anthropic</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">{&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
</code></pre></div>
    <p>Or download the same chat prompt template from the Hub:</p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template_downloaded</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template_downloaded</span> <span class="o">==</span> <span class="n">prompt_template</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="go">True</span>
</code></pre></div>

            <details class="quote">
              <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span>
<span class="normal"><a href="#__codelineno-0-1094">1094</a></span>
<span class="normal"><a href="#__codelineno-0-1095">1095</a></span>
<span class="normal"><a href="#__codelineno-0-1096">1096</a></span>
<span class="normal"><a href="#__codelineno-0-1097">1097</a></span>
<span class="normal"><a href="#__codelineno-0-1098">1098</a></span>
<span class="normal"><a href="#__codelineno-0-1099">1099</a></span>
<span class="normal"><a href="#__codelineno-0-1100">1100</a></span>
<span class="normal"><a href="#__codelineno-0-1101">1101</a></span>
<span class="normal"><a href="#__codelineno-0-1102">1102</a></span>
<span class="normal"><a href="#__codelineno-0-1103">1103</a></span>
<span class="normal"><a href="#__codelineno-0-1104">1104</a></span>
<span class="normal"><a href="#__codelineno-0-1105">1105</a></span>
<span class="normal"><a href="#__codelineno-0-1106">1106</a></span>
<span class="normal"><a href="#__codelineno-0-1107">1107</a></span>
<span class="normal"><a href="#__codelineno-0-1108">1108</a></span>
<span class="normal"><a href="#__codelineno-0-1109">1109</a></span>
<span class="normal"><a href="#__codelineno-0-1110">1110</a></span>
<span class="normal"><a href="#__codelineno-0-1111">1111</a></span>
<span class="normal"><a href="#__codelineno-0-1112">1112</a></span>
<span class="normal"><a href="#__codelineno-0-1113">1113</a></span>
<span class="normal"><a href="#__codelineno-0-1114">1114</a></span>
<span class="normal"><a href="#__codelineno-0-1115">1115</a></span>
<span class="normal"><a href="#__codelineno-0-1116">1116</a></span>
<span class="normal"><a href="#__codelineno-0-1117">1117</a></span>
<span class="normal"><a href="#__codelineno-0-1118">1118</a></span>
<span class="normal"><a href="#__codelineno-0-1119">1119</a></span>
<span class="normal"><a href="#__codelineno-0-1120">1120</a></span>
<span class="normal"><a href="#__codelineno-0-1121">1121</a></span>
<span class="normal"><a href="#__codelineno-0-1122">1122</a></span>
<span class="normal"><a href="#__codelineno-0-1123">1123</a></span>
<span class="normal"><a href="#__codelineno-0-1124">1124</a></span>
<span class="normal"><a href="#__codelineno-0-1125">1125</a></span>
<span class="normal"><a href="#__codelineno-0-1126">1126</a></span>
<span class="normal"><a href="#__codelineno-0-1127">1127</a></span>
<span class="normal"><a href="#__codelineno-0-1128">1128</a></span>
<span class="normal"><a href="#__codelineno-0-1129">1129</a></span>
<span class="normal"><a href="#__codelineno-0-1130">1130</a></span>
<span class="normal"><a href="#__codelineno-0-1131">1131</a></span>
<span class="normal"><a href="#__codelineno-0-1132">1132</a></span>
<span class="normal"><a href="#__codelineno-0-1133">1133</a></span>
<span class="normal"><a href="#__codelineno-0-1134">1134</a></span>
<span class="normal"><a href="#__codelineno-0-1135">1135</a></span>
<span class="normal"><a href="#__codelineno-0-1136">1136</a></span>
<span class="normal"><a href="#__codelineno-0-1137">1137</a></span>
<span class="normal"><a href="#__codelineno-0-1138">1138</a></span>
<span class="normal"><a href="#__codelineno-0-1139">1139</a></span>
<span class="normal"><a href="#__codelineno-0-1140">1140</a></span>
<span class="normal"><a href="#__codelineno-0-1141">1141</a></span>
<span class="normal"><a href="#__codelineno-0-1142">1142</a></span>
<span class="normal"><a href="#__codelineno-0-1143">1143</a></span>
<span class="normal"><a href="#__codelineno-0-1144">1144</a></span>
<span class="normal"><a href="#__codelineno-0-1145">1145</a></span>
<span class="normal"><a href="#__codelineno-0-1146">1146</a></span>
<span class="normal"><a href="#__codelineno-0-1147">1147</a></span>
<span class="normal"><a href="#__codelineno-0-1148">1148</a></span>
<span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span>
<span class="normal"><a href="#__codelineno-0-1181">1181</a></span>
<span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span>
<span class="normal"><a href="#__codelineno-0-1229">1229</a></span>
<span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="k">class</span><span class="w"> </span><span class="nc">ChatPromptTemplate</span><span class="p">(</span><span class="n">BasePromptTemplate</span><span class="p">):</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A class representing a chat prompt template that can be formatted for and used with various LLM clients.</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a><span class="sd">        Instantiate a chat prompt template:</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a><span class="sd">        &gt;&gt;&gt; template_messages = [</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a><span class="sd">        ...     {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a coding assistant who explains concepts clearly and provides short examples.&quot;},</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a><span class="sd">        ...     {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Explain what {{concept}} is in {{programming_language}}.&quot;}</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a><span class="sd">        ... ]</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a><span class="sd">        &gt;&gt;&gt; template_variables = [&quot;concept&quot;, &quot;programming_language&quot;]</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a><span class="sd">        &gt;&gt;&gt; metadata = {</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a><span class="sd">        ...     &quot;name&quot;: &quot;Code Teacher&quot;,</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a><span class="sd">        ...     &quot;description&quot;: &quot;A simple chat prompt for explaining programming concepts with examples&quot;,</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a><span class="sd">        ...     &quot;tags&quot;: [&quot;programming&quot;, &quot;education&quot;],</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a><span class="sd">        ...     &quot;version&quot;: &quot;0.0.1&quot;,</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a><span class="sd">        ...     &quot;author&quot;: &quot;Guido van Bossum&quot;</span>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a><span class="sd">        ... }</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate(</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="sd">        ...     template=template_messages,</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a><span class="sd">        ...     template_variables=template_variables,</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="sd">        ...     metadata=metadata</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a><span class="sd">        &gt;&gt;&gt; print(prompt_template)</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="sd">        ChatPromptTemplate(template=[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding a..., template_variables=[&#39;concept&#39;, &#39;programming_language&#39;], metadata={&#39;name&#39;: &#39;Code Teacher&#39;, &#39;description&#39;: &#39;A simple ..., client_parameters={}, custom_data={}, populator=&#39;jinja2&#39;, jinja2_security_level=&#39;standard&#39;)</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="sd">        &gt;&gt;&gt; # Inspect template attributes</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a><span class="sd">        [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what {{concept}} is in {{programming_language}}.&#39;}]</span>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a><span class="sd">        &gt;&gt;&gt; prompt_template.template_variables</span>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a><span class="sd">        [&#39;concept&#39;, &#39;programming_language&#39;]</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a><span class="sd">        &gt;&gt;&gt; # Populate the template</span>
<a id="__codelineno-0-1094" name="__codelineno-0-1094"></a><span class="sd">        &gt;&gt;&gt; messages = prompt_template.populate(</span>
<a id="__codelineno-0-1095" name="__codelineno-0-1095"></a><span class="sd">        ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1096" name="__codelineno-0-1096"></a><span class="sd">        ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1097" name="__codelineno-0-1097"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1098" name="__codelineno-0-1098"></a><span class="sd">        &gt;&gt;&gt; print(messages)</span>
<a id="__codelineno-0-1099" name="__codelineno-0-1099"></a><span class="sd">        [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
<a id="__codelineno-0-1100" name="__codelineno-0-1100"></a>
<a id="__codelineno-0-1101" name="__codelineno-0-1101"></a><span class="sd">        &gt;&gt;&gt; # By default, the populated prompt is in the OpenAI messages format, as it is adopted by many open-source libraries</span>
<a id="__codelineno-0-1102" name="__codelineno-0-1102"></a><span class="sd">        &gt;&gt;&gt; # You can convert to formats used by other LLM clients like Anthropic&#39;s or Google Gemini&#39;s like this:</span>
<a id="__codelineno-0-1103" name="__codelineno-0-1103"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import format_for_client</span>
<a id="__codelineno-0-1104" name="__codelineno-0-1104"></a><span class="sd">        &gt;&gt;&gt; messages_anthropic = format_for_client(messages, &quot;anthropic&quot;)</span>
<a id="__codelineno-0-1105" name="__codelineno-0-1105"></a><span class="sd">        &gt;&gt;&gt; print(messages_anthropic)</span>
<a id="__codelineno-0-1106" name="__codelineno-0-1106"></a><span class="sd">        {&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
<a id="__codelineno-0-1107" name="__codelineno-0-1107"></a>
<a id="__codelineno-0-1108" name="__codelineno-0-1108"></a><span class="sd">        &gt;&gt;&gt; # Convenience method to populate and format in one step for clients that do not use the OpenAI messages format</span>
<a id="__codelineno-0-1109" name="__codelineno-0-1109"></a><span class="sd">        &gt;&gt;&gt; messages_anthropic = prompt_template.create_messages(</span>
<a id="__codelineno-0-1110" name="__codelineno-0-1110"></a><span class="sd">        ...     client=&quot;anthropic&quot;,</span>
<a id="__codelineno-0-1111" name="__codelineno-0-1111"></a><span class="sd">        ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1112" name="__codelineno-0-1112"></a><span class="sd">        ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1113" name="__codelineno-0-1113"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1114" name="__codelineno-0-1114"></a><span class="sd">        &gt;&gt;&gt; print(messages_anthropic)</span>
<a id="__codelineno-0-1115" name="__codelineno-0-1115"></a><span class="sd">        {&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
<a id="__codelineno-0-1116" name="__codelineno-0-1116"></a>
<a id="__codelineno-0-1117" name="__codelineno-0-1117"></a><span class="sd">        Or download the same chat prompt template from the Hub:</span>
<a id="__codelineno-0-1118" name="__codelineno-0-1118"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1119" name="__codelineno-0-1119"></a><span class="sd">        &gt;&gt;&gt; prompt_template_downloaded = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1120" name="__codelineno-0-1120"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1121" name="__codelineno-0-1121"></a><span class="sd">        ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1122" name="__codelineno-0-1122"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1123" name="__codelineno-0-1123"></a><span class="sd">        &gt;&gt;&gt; prompt_template_downloaded == prompt_template</span>
<a id="__codelineno-0-1124" name="__codelineno-0-1124"></a><span class="sd">        True</span>
<a id="__codelineno-0-1125" name="__codelineno-0-1125"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1126" name="__codelineno-0-1126"></a>
<a id="__codelineno-0-1127" name="__codelineno-0-1127"></a>    <span class="n">template</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
<a id="__codelineno-0-1128" name="__codelineno-0-1128"></a>
<a id="__codelineno-0-1129" name="__codelineno-0-1129"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-1130" name="__codelineno-0-1130"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1131" name="__codelineno-0-1131"></a>        <span class="n">template</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
<a id="__codelineno-0-1132" name="__codelineno-0-1132"></a>        <span class="n">template_variables</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1133" name="__codelineno-0-1133"></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1134" name="__codelineno-0-1134"></a>        <span class="n">client_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1135" name="__codelineno-0-1135"></a>        <span class="n">custom_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1136" name="__codelineno-0-1136"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1137" name="__codelineno-0-1137"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1138" name="__codelineno-0-1138"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1139" name="__codelineno-0-1139"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-1140" name="__codelineno-0-1140"></a>            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
<a id="__codelineno-0-1141" name="__codelineno-0-1141"></a>            <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1142" name="__codelineno-0-1142"></a>            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1143" name="__codelineno-0-1143"></a>            <span class="n">client_parameters</span><span class="o">=</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1144" name="__codelineno-0-1144"></a>            <span class="n">custom_data</span><span class="o">=</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1145" name="__codelineno-0-1145"></a>            <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-1146" name="__codelineno-0-1146"></a>            <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-1147" name="__codelineno-0-1147"></a>        <span class="p">)</span>
<a id="__codelineno-0-1148" name="__codelineno-0-1148"></a>
<a id="__codelineno-0-1149" name="__codelineno-0-1149"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Populate the prompt template messages by replacing placeholders with provided values.</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="sd">            ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a><span class="sd">            &gt;&gt;&gt; messages = prompt_template.populate(</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a><span class="sd">            ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a><span class="sd">            ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a><span class="sd">            &gt;&gt;&gt; print(messages)</span>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a><span class="sd">            [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a><span class="sd">            **user_provided_variables: The values to fill placeholders in the messages template.</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a><span class="sd">            List[Dict[str, Any]]: The populated prompt as a list in the OpenAI messages format.</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_user_provided_variables</span><span class="p">(</span><span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>        <span class="n">messages_template_populated</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>            <span class="p">{</span>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>                <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]),</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_populate_placeholders</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span> <span class="n">user_provided_variables</span><span class="p">),</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>            <span class="p">}</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>            <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>        <span class="p">]</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>        <span class="k">return</span> <span class="n">messages_template_populated</span>
<a id="__codelineno-0-1181" name="__codelineno-0-1181"></a>
<a id="__codelineno-0-1182" name="__codelineno-0-1182"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">create_messages</span><span class="p">(</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">ClientType</span> <span class="o">=</span> <span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convenience method that populates a prompt template and formats it for a client in one step.</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a><span class="sd">        This method is only useful if your a client that does not use the OpenAI messages format, because</span>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a><span class="sd">        populating a ChatPromptTemplate converts it into the OpenAI messages format by default.</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1192" name="__codelineno-0-1192"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1193" name="__codelineno-0-1193"></a><span class="sd">            ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a><span class="sd">            &gt;&gt;&gt; # Format for OpenAI (default)</span>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a><span class="sd">            &gt;&gt;&gt; messages = prompt_template.create_messages(</span>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a><span class="sd">            ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a><span class="sd">            ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a><span class="sd">            &gt;&gt;&gt; print(messages)</span>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a><span class="sd">            [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a><span class="sd">            &gt;&gt;&gt; # Format for Anthropic</span>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a><span class="sd">            &gt;&gt;&gt; messages = prompt_template.create_messages(</span>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a><span class="sd">            ...     client=&quot;anthropic&quot;,</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a><span class="sd">            ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><span class="sd">            ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><span class="sd">            &gt;&gt;&gt; messages</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a><span class="sd">            {&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a><span class="sd">            client (str): The client format to use (&#39;openai&#39;, &#39;anthropic&#39;, &#39;google&#39;). Defaults to &#39;openai&#39;.</span>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><span class="sd">            **user_provided_variables: The variables to fill into the prompt template. For example, if your template</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><span class="sd">                expects variables like &#39;name&#39; and &#39;age&#39;, pass them as keyword arguments.</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><span class="sd">            List[Dict[str, Any]] | Dict[str, Any]: A populated prompt formatted for the specified client.</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a>        <span class="k">if</span> <span class="s2">&quot;client&quot;</span> <span class="ow">in</span> <span class="n">user_provided_variables</span><span class="p">:</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a>                <span class="sa">f</span><span class="s2">&quot;&#39;client&#39; was passed both as a parameter for the LLM inference client (&#39;</span><span class="si">{</span><span class="n">client</span><span class="si">}</span><span class="s2">&#39;) and in user_provided_variables &quot;</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>                <span class="sa">f</span><span class="s2">&quot;(&#39;</span><span class="si">{</span><span class="n">user_provided_variables</span><span class="p">[</span><span class="s1">&#39;client&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;). The first parameter version will be used for formatting, &quot;</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a>                <span class="s2">&quot;while the second user_provided_variable version will be used in template population.&quot;</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a>            <span class="p">)</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a>        <span class="k">return</span> <span class="n">format_for_client</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>
<a id="__codelineno-0-1229" name="__codelineno-0-1229"></a>
<a id="__codelineno-0-1230" name="__codelineno-0-1230"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">to_langchain_template</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LC_ChatPromptTemplate&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the ChatPromptTemplate to a LangChain ChatPromptTemplate.</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="sd">            &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><span class="sd">            &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="sd">            ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><span class="sd">            ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="sd">            &gt;&gt;&gt; lc_template = prompt_template.to_langchain_template()</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><span class="sd">            &gt;&gt;&gt; # test equivalence</span>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="sd">            &gt;&gt;&gt; from langchain_core.prompts import ChatPromptTemplate as LC_ChatPromptTemplate</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="sd">            &gt;&gt;&gt; isinstance(lc_template, LC_ChatPromptTemplate)</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><span class="sd">            True</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a><span class="sd">            ChatPromptTemplate: A LangChain ChatPromptTemplate object.</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><span class="sd">            ImportError: If LangChain is not installed.</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>            <span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.prompts</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span> <span class="k">as</span> <span class="n">LC_ChatPromptTemplate</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>        <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;LangChain is not installed. Please install it with &#39;pip install langchain&#39;&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>        <span class="c1"># LangChain expects a list of tuples of the form (role, content)</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>        <span class="n">messages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>            <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]),</span> <span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]))</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>        <span class="p">]</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>        <span class="k">return</span> <span class="n">LC_ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a>            <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a>            <span class="n">input_variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a>            <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.ChatPromptTemplate.populate" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">populate</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Populate the prompt template messages by replacing placeholders with provided values.</p>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="n">concept</span><span class="o">=</span><span class="s2">&quot;list comprehension&quot;</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="n">programming_language</span><span class="o">=</span><span class="s2">&quot;Python&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="go">[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
</code></pre></div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>**user_provided_variables</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The values to fill placeholders in the messages template.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List[Dict[str, Any]]: The populated prompt as a list in the OpenAI messages format.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1149">1149</a></span>
<span class="normal"><a href="#__codelineno-0-1150">1150</a></span>
<span class="normal"><a href="#__codelineno-0-1151">1151</a></span>
<span class="normal"><a href="#__codelineno-0-1152">1152</a></span>
<span class="normal"><a href="#__codelineno-0-1153">1153</a></span>
<span class="normal"><a href="#__codelineno-0-1154">1154</a></span>
<span class="normal"><a href="#__codelineno-0-1155">1155</a></span>
<span class="normal"><a href="#__codelineno-0-1156">1156</a></span>
<span class="normal"><a href="#__codelineno-0-1157">1157</a></span>
<span class="normal"><a href="#__codelineno-0-1158">1158</a></span>
<span class="normal"><a href="#__codelineno-0-1159">1159</a></span>
<span class="normal"><a href="#__codelineno-0-1160">1160</a></span>
<span class="normal"><a href="#__codelineno-0-1161">1161</a></span>
<span class="normal"><a href="#__codelineno-0-1162">1162</a></span>
<span class="normal"><a href="#__codelineno-0-1163">1163</a></span>
<span class="normal"><a href="#__codelineno-0-1164">1164</a></span>
<span class="normal"><a href="#__codelineno-0-1165">1165</a></span>
<span class="normal"><a href="#__codelineno-0-1166">1166</a></span>
<span class="normal"><a href="#__codelineno-0-1167">1167</a></span>
<span class="normal"><a href="#__codelineno-0-1168">1168</a></span>
<span class="normal"><a href="#__codelineno-0-1169">1169</a></span>
<span class="normal"><a href="#__codelineno-0-1170">1170</a></span>
<span class="normal"><a href="#__codelineno-0-1171">1171</a></span>
<span class="normal"><a href="#__codelineno-0-1172">1172</a></span>
<span class="normal"><a href="#__codelineno-0-1173">1173</a></span>
<span class="normal"><a href="#__codelineno-0-1174">1174</a></span>
<span class="normal"><a href="#__codelineno-0-1175">1175</a></span>
<span class="normal"><a href="#__codelineno-0-1176">1176</a></span>
<span class="normal"><a href="#__codelineno-0-1177">1177</a></span>
<span class="normal"><a href="#__codelineno-0-1178">1178</a></span>
<span class="normal"><a href="#__codelineno-0-1179">1179</a></span>
<span class="normal"><a href="#__codelineno-0-1180">1180</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1149" name="__codelineno-0-1149"></a><span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<a id="__codelineno-0-1150" name="__codelineno-0-1150"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Populate the prompt template messages by replacing placeholders with provided values.</span>
<a id="__codelineno-0-1151" name="__codelineno-0-1151"></a>
<a id="__codelineno-0-1152" name="__codelineno-0-1152"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1153" name="__codelineno-0-1153"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1154" name="__codelineno-0-1154"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1155" name="__codelineno-0-1155"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1156" name="__codelineno-0-1156"></a><span class="sd">        ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1157" name="__codelineno-0-1157"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1158" name="__codelineno-0-1158"></a><span class="sd">        &gt;&gt;&gt; messages = prompt_template.populate(</span>
<a id="__codelineno-0-1159" name="__codelineno-0-1159"></a><span class="sd">        ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1160" name="__codelineno-0-1160"></a><span class="sd">        ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1161" name="__codelineno-0-1161"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1162" name="__codelineno-0-1162"></a><span class="sd">        &gt;&gt;&gt; print(messages)</span>
<a id="__codelineno-0-1163" name="__codelineno-0-1163"></a><span class="sd">        [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
<a id="__codelineno-0-1164" name="__codelineno-0-1164"></a>
<a id="__codelineno-0-1165" name="__codelineno-0-1165"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1166" name="__codelineno-0-1166"></a><span class="sd">        **user_provided_variables: The values to fill placeholders in the messages template.</span>
<a id="__codelineno-0-1167" name="__codelineno-0-1167"></a>
<a id="__codelineno-0-1168" name="__codelineno-0-1168"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1169" name="__codelineno-0-1169"></a><span class="sd">        List[Dict[str, Any]]: The populated prompt as a list in the OpenAI messages format.</span>
<a id="__codelineno-0-1170" name="__codelineno-0-1170"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1171" name="__codelineno-0-1171"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_user_provided_variables</span><span class="p">(</span><span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-1172" name="__codelineno-0-1172"></a>
<a id="__codelineno-0-1173" name="__codelineno-0-1173"></a>    <span class="n">messages_template_populated</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1174" name="__codelineno-0-1174"></a>        <span class="p">{</span>
<a id="__codelineno-0-1175" name="__codelineno-0-1175"></a>            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]),</span>
<a id="__codelineno-0-1176" name="__codelineno-0-1176"></a>            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_populate_placeholders</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span> <span class="n">user_provided_variables</span><span class="p">),</span>
<a id="__codelineno-0-1177" name="__codelineno-0-1177"></a>        <span class="p">}</span>
<a id="__codelineno-0-1178" name="__codelineno-0-1178"></a>        <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-1179" name="__codelineno-0-1179"></a>    <span class="p">]</span>
<a id="__codelineno-0-1180" name="__codelineno-0-1180"></a>    <span class="k">return</span> <span class="n">messages_template_populated</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.ChatPromptTemplate.create_messages" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">create_messages</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">create_messages</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="s1">&#39;openai&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convenience method that populates a prompt template and formats it for a client in one step.
This method is only useful if your a client that does not use the OpenAI messages format, because
populating a ChatPromptTemplate converts it into the OpenAI messages format by default.</p>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Format for OpenAI (default)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">create_messages</span><span class="p">(</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="n">concept</span><span class="o">=</span><span class="s2">&quot;list comprehension&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="n">programming_language</span><span class="o">=</span><span class="s2">&quot;Python&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">[{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Format for Anthropic</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">create_messages</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">client</span><span class="o">=</span><span class="s2">&quot;anthropic&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">concept</span><span class="o">=</span><span class="s2">&quot;list comprehension&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="n">programming_language</span><span class="o">=</span><span class="s2">&quot;Python&quot;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">{&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
</code></pre></div>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>client</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The client format to use ('openai', 'anthropic', 'google'). Defaults to 'openai'.</p>
            </div>
          </td>
          <td>
                <code>&#39;openai&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>**user_provided_variables</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The variables to fill into the prompt template. For example, if your template
expects variables like 'name' and 'age', pass them as keyword arguments.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]] | <span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List[Dict[str, Any]] | Dict[str, Any]: A populated prompt formatted for the specified client.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1182">1182</a></span>
<span class="normal"><a href="#__codelineno-0-1183">1183</a></span>
<span class="normal"><a href="#__codelineno-0-1184">1184</a></span>
<span class="normal"><a href="#__codelineno-0-1185">1185</a></span>
<span class="normal"><a href="#__codelineno-0-1186">1186</a></span>
<span class="normal"><a href="#__codelineno-0-1187">1187</a></span>
<span class="normal"><a href="#__codelineno-0-1188">1188</a></span>
<span class="normal"><a href="#__codelineno-0-1189">1189</a></span>
<span class="normal"><a href="#__codelineno-0-1190">1190</a></span>
<span class="normal"><a href="#__codelineno-0-1191">1191</a></span>
<span class="normal"><a href="#__codelineno-0-1192">1192</a></span>
<span class="normal"><a href="#__codelineno-0-1193">1193</a></span>
<span class="normal"><a href="#__codelineno-0-1194">1194</a></span>
<span class="normal"><a href="#__codelineno-0-1195">1195</a></span>
<span class="normal"><a href="#__codelineno-0-1196">1196</a></span>
<span class="normal"><a href="#__codelineno-0-1197">1197</a></span>
<span class="normal"><a href="#__codelineno-0-1198">1198</a></span>
<span class="normal"><a href="#__codelineno-0-1199">1199</a></span>
<span class="normal"><a href="#__codelineno-0-1200">1200</a></span>
<span class="normal"><a href="#__codelineno-0-1201">1201</a></span>
<span class="normal"><a href="#__codelineno-0-1202">1202</a></span>
<span class="normal"><a href="#__codelineno-0-1203">1203</a></span>
<span class="normal"><a href="#__codelineno-0-1204">1204</a></span>
<span class="normal"><a href="#__codelineno-0-1205">1205</a></span>
<span class="normal"><a href="#__codelineno-0-1206">1206</a></span>
<span class="normal"><a href="#__codelineno-0-1207">1207</a></span>
<span class="normal"><a href="#__codelineno-0-1208">1208</a></span>
<span class="normal"><a href="#__codelineno-0-1209">1209</a></span>
<span class="normal"><a href="#__codelineno-0-1210">1210</a></span>
<span class="normal"><a href="#__codelineno-0-1211">1211</a></span>
<span class="normal"><a href="#__codelineno-0-1212">1212</a></span>
<span class="normal"><a href="#__codelineno-0-1213">1213</a></span>
<span class="normal"><a href="#__codelineno-0-1214">1214</a></span>
<span class="normal"><a href="#__codelineno-0-1215">1215</a></span>
<span class="normal"><a href="#__codelineno-0-1216">1216</a></span>
<span class="normal"><a href="#__codelineno-0-1217">1217</a></span>
<span class="normal"><a href="#__codelineno-0-1218">1218</a></span>
<span class="normal"><a href="#__codelineno-0-1219">1219</a></span>
<span class="normal"><a href="#__codelineno-0-1220">1220</a></span>
<span class="normal"><a href="#__codelineno-0-1221">1221</a></span>
<span class="normal"><a href="#__codelineno-0-1222">1222</a></span>
<span class="normal"><a href="#__codelineno-0-1223">1223</a></span>
<span class="normal"><a href="#__codelineno-0-1224">1224</a></span>
<span class="normal"><a href="#__codelineno-0-1225">1225</a></span>
<span class="normal"><a href="#__codelineno-0-1226">1226</a></span>
<span class="normal"><a href="#__codelineno-0-1227">1227</a></span>
<span class="normal"><a href="#__codelineno-0-1228">1228</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1182" name="__codelineno-0-1182"></a><span class="k">def</span><span class="w"> </span><span class="nf">create_messages</span><span class="p">(</span>
<a id="__codelineno-0-1183" name="__codelineno-0-1183"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">:</span> <span class="n">ClientType</span> <span class="o">=</span> <span class="s2">&quot;openai&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span>
<a id="__codelineno-0-1184" name="__codelineno-0-1184"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-1185" name="__codelineno-0-1185"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convenience method that populates a prompt template and formats it for a client in one step.</span>
<a id="__codelineno-0-1186" name="__codelineno-0-1186"></a><span class="sd">    This method is only useful if your a client that does not use the OpenAI messages format, because</span>
<a id="__codelineno-0-1187" name="__codelineno-0-1187"></a><span class="sd">    populating a ChatPromptTemplate converts it into the OpenAI messages format by default.</span>
<a id="__codelineno-0-1188" name="__codelineno-0-1188"></a>
<a id="__codelineno-0-1189" name="__codelineno-0-1189"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1190" name="__codelineno-0-1190"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1191" name="__codelineno-0-1191"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1192" name="__codelineno-0-1192"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1193" name="__codelineno-0-1193"></a><span class="sd">        ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1194" name="__codelineno-0-1194"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1195" name="__codelineno-0-1195"></a><span class="sd">        &gt;&gt;&gt; # Format for OpenAI (default)</span>
<a id="__codelineno-0-1196" name="__codelineno-0-1196"></a><span class="sd">        &gt;&gt;&gt; messages = prompt_template.create_messages(</span>
<a id="__codelineno-0-1197" name="__codelineno-0-1197"></a><span class="sd">        ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1198" name="__codelineno-0-1198"></a><span class="sd">        ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1199" name="__codelineno-0-1199"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1200" name="__codelineno-0-1200"></a><span class="sd">        &gt;&gt;&gt; print(messages)</span>
<a id="__codelineno-0-1201" name="__codelineno-0-1201"></a><span class="sd">        [{&#39;role&#39;: &#39;system&#39;, &#39;content&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;}, {&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]</span>
<a id="__codelineno-0-1202" name="__codelineno-0-1202"></a>
<a id="__codelineno-0-1203" name="__codelineno-0-1203"></a><span class="sd">        &gt;&gt;&gt; # Format for Anthropic</span>
<a id="__codelineno-0-1204" name="__codelineno-0-1204"></a><span class="sd">        &gt;&gt;&gt; messages = prompt_template.create_messages(</span>
<a id="__codelineno-0-1205" name="__codelineno-0-1205"></a><span class="sd">        ...     client=&quot;anthropic&quot;,</span>
<a id="__codelineno-0-1206" name="__codelineno-0-1206"></a><span class="sd">        ...     concept=&quot;list comprehension&quot;,</span>
<a id="__codelineno-0-1207" name="__codelineno-0-1207"></a><span class="sd">        ...     programming_language=&quot;Python&quot;</span>
<a id="__codelineno-0-1208" name="__codelineno-0-1208"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1209" name="__codelineno-0-1209"></a><span class="sd">        &gt;&gt;&gt; messages</span>
<a id="__codelineno-0-1210" name="__codelineno-0-1210"></a><span class="sd">        {&#39;system&#39;: &#39;You are a coding assistant who explains concepts clearly and provides short examples.&#39;, &#39;messages&#39;: [{&#39;role&#39;: &#39;user&#39;, &#39;content&#39;: &#39;Explain what list comprehension is in Python.&#39;}]}</span>
<a id="__codelineno-0-1211" name="__codelineno-0-1211"></a>
<a id="__codelineno-0-1212" name="__codelineno-0-1212"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1213" name="__codelineno-0-1213"></a><span class="sd">        client (str): The client format to use (&#39;openai&#39;, &#39;anthropic&#39;, &#39;google&#39;). Defaults to &#39;openai&#39;.</span>
<a id="__codelineno-0-1214" name="__codelineno-0-1214"></a><span class="sd">        **user_provided_variables: The variables to fill into the prompt template. For example, if your template</span>
<a id="__codelineno-0-1215" name="__codelineno-0-1215"></a><span class="sd">            expects variables like &#39;name&#39; and &#39;age&#39;, pass them as keyword arguments.</span>
<a id="__codelineno-0-1216" name="__codelineno-0-1216"></a>
<a id="__codelineno-0-1217" name="__codelineno-0-1217"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1218" name="__codelineno-0-1218"></a><span class="sd">        List[Dict[str, Any]] | Dict[str, Any]: A populated prompt formatted for the specified client.</span>
<a id="__codelineno-0-1219" name="__codelineno-0-1219"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1220" name="__codelineno-0-1220"></a>    <span class="k">if</span> <span class="s2">&quot;client&quot;</span> <span class="ow">in</span> <span class="n">user_provided_variables</span><span class="p">:</span>
<a id="__codelineno-0-1221" name="__codelineno-0-1221"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-1222" name="__codelineno-0-1222"></a>            <span class="sa">f</span><span class="s2">&quot;&#39;client&#39; was passed both as a parameter for the LLM inference client (&#39;</span><span class="si">{</span><span class="n">client</span><span class="si">}</span><span class="s2">&#39;) and in user_provided_variables &quot;</span>
<a id="__codelineno-0-1223" name="__codelineno-0-1223"></a>            <span class="sa">f</span><span class="s2">&quot;(&#39;</span><span class="si">{</span><span class="n">user_provided_variables</span><span class="p">[</span><span class="s1">&#39;client&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;). The first parameter version will be used for formatting, &quot;</span>
<a id="__codelineno-0-1224" name="__codelineno-0-1224"></a>            <span class="s2">&quot;while the second user_provided_variable version will be used in template population.&quot;</span>
<a id="__codelineno-0-1225" name="__codelineno-0-1225"></a>        <span class="p">)</span>
<a id="__codelineno-0-1226" name="__codelineno-0-1226"></a>
<a id="__codelineno-0-1227" name="__codelineno-0-1227"></a>    <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
<a id="__codelineno-0-1228" name="__codelineno-0-1228"></a>    <span class="k">return</span> <span class="n">format_for_client</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.ChatPromptTemplate.to_langchain_template" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">to_langchain_template</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">to_langchain_template</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the ChatPromptTemplate to a LangChain ChatPromptTemplate.</p>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">prompt_templates</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">load_from_hub</span><span class="p">(</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="n">repo_id</span><span class="o">=</span><span class="s2">&quot;MoritzLaurer/example_prompts&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">lc_template</span> <span class="o">=</span> <span class="n">prompt_template</span><span class="o">.</span><span class="n">to_langchain_template</span><span class="p">()</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="c1"># test equivalence</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.prompts</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span> <span class="k">as</span> <span class="n">LC_ChatPromptTemplate</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">lc_template</span><span class="p">,</span> <span class="n">LC_ChatPromptTemplate</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">True</span>
</code></pre></div>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>ChatPromptTemplate</code></td>          <td>
                <code><span title="langchain_core.prompts.ChatPromptTemplate">ChatPromptTemplate</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LangChain ChatPromptTemplate object.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ImportError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If LangChain is not installed.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1230">1230</a></span>
<span class="normal"><a href="#__codelineno-0-1231">1231</a></span>
<span class="normal"><a href="#__codelineno-0-1232">1232</a></span>
<span class="normal"><a href="#__codelineno-0-1233">1233</a></span>
<span class="normal"><a href="#__codelineno-0-1234">1234</a></span>
<span class="normal"><a href="#__codelineno-0-1235">1235</a></span>
<span class="normal"><a href="#__codelineno-0-1236">1236</a></span>
<span class="normal"><a href="#__codelineno-0-1237">1237</a></span>
<span class="normal"><a href="#__codelineno-0-1238">1238</a></span>
<span class="normal"><a href="#__codelineno-0-1239">1239</a></span>
<span class="normal"><a href="#__codelineno-0-1240">1240</a></span>
<span class="normal"><a href="#__codelineno-0-1241">1241</a></span>
<span class="normal"><a href="#__codelineno-0-1242">1242</a></span>
<span class="normal"><a href="#__codelineno-0-1243">1243</a></span>
<span class="normal"><a href="#__codelineno-0-1244">1244</a></span>
<span class="normal"><a href="#__codelineno-0-1245">1245</a></span>
<span class="normal"><a href="#__codelineno-0-1246">1246</a></span>
<span class="normal"><a href="#__codelineno-0-1247">1247</a></span>
<span class="normal"><a href="#__codelineno-0-1248">1248</a></span>
<span class="normal"><a href="#__codelineno-0-1249">1249</a></span>
<span class="normal"><a href="#__codelineno-0-1250">1250</a></span>
<span class="normal"><a href="#__codelineno-0-1251">1251</a></span>
<span class="normal"><a href="#__codelineno-0-1252">1252</a></span>
<span class="normal"><a href="#__codelineno-0-1253">1253</a></span>
<span class="normal"><a href="#__codelineno-0-1254">1254</a></span>
<span class="normal"><a href="#__codelineno-0-1255">1255</a></span>
<span class="normal"><a href="#__codelineno-0-1256">1256</a></span>
<span class="normal"><a href="#__codelineno-0-1257">1257</a></span>
<span class="normal"><a href="#__codelineno-0-1258">1258</a></span>
<span class="normal"><a href="#__codelineno-0-1259">1259</a></span>
<span class="normal"><a href="#__codelineno-0-1260">1260</a></span>
<span class="normal"><a href="#__codelineno-0-1261">1261</a></span>
<span class="normal"><a href="#__codelineno-0-1262">1262</a></span>
<span class="normal"><a href="#__codelineno-0-1263">1263</a></span>
<span class="normal"><a href="#__codelineno-0-1264">1264</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1230" name="__codelineno-0-1230"></a><span class="k">def</span><span class="w"> </span><span class="nf">to_langchain_template</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LC_ChatPromptTemplate&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1231" name="__codelineno-0-1231"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the ChatPromptTemplate to a LangChain ChatPromptTemplate.</span>
<a id="__codelineno-0-1232" name="__codelineno-0-1232"></a>
<a id="__codelineno-0-1233" name="__codelineno-0-1233"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-1234" name="__codelineno-0-1234"></a><span class="sd">        &gt;&gt;&gt; from prompt_templates import ChatPromptTemplate</span>
<a id="__codelineno-0-1235" name="__codelineno-0-1235"></a><span class="sd">        &gt;&gt;&gt; prompt_template = ChatPromptTemplate.load_from_hub(</span>
<a id="__codelineno-0-1236" name="__codelineno-0-1236"></a><span class="sd">        ...     repo_id=&quot;MoritzLaurer/example_prompts&quot;,</span>
<a id="__codelineno-0-1237" name="__codelineno-0-1237"></a><span class="sd">        ...     filename=&quot;code_teacher.yaml&quot;</span>
<a id="__codelineno-0-1238" name="__codelineno-0-1238"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-1239" name="__codelineno-0-1239"></a><span class="sd">        &gt;&gt;&gt; lc_template = prompt_template.to_langchain_template()</span>
<a id="__codelineno-0-1240" name="__codelineno-0-1240"></a><span class="sd">        &gt;&gt;&gt; # test equivalence</span>
<a id="__codelineno-0-1241" name="__codelineno-0-1241"></a><span class="sd">        &gt;&gt;&gt; from langchain_core.prompts import ChatPromptTemplate as LC_ChatPromptTemplate</span>
<a id="__codelineno-0-1242" name="__codelineno-0-1242"></a><span class="sd">        &gt;&gt;&gt; isinstance(lc_template, LC_ChatPromptTemplate)</span>
<a id="__codelineno-0-1243" name="__codelineno-0-1243"></a><span class="sd">        True</span>
<a id="__codelineno-0-1244" name="__codelineno-0-1244"></a>
<a id="__codelineno-0-1245" name="__codelineno-0-1245"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1246" name="__codelineno-0-1246"></a><span class="sd">        ChatPromptTemplate: A LangChain ChatPromptTemplate object.</span>
<a id="__codelineno-0-1247" name="__codelineno-0-1247"></a>
<a id="__codelineno-0-1248" name="__codelineno-0-1248"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-1249" name="__codelineno-0-1249"></a><span class="sd">        ImportError: If LangChain is not installed.</span>
<a id="__codelineno-0-1250" name="__codelineno-0-1250"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1251" name="__codelineno-0-1251"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1252" name="__codelineno-0-1252"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.prompts</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatPromptTemplate</span> <span class="k">as</span> <span class="n">LC_ChatPromptTemplate</span>
<a id="__codelineno-0-1253" name="__codelineno-0-1253"></a>    <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-1254" name="__codelineno-0-1254"></a>        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;LangChain is not installed. Please install it with &#39;pip install langchain&#39;&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
<a id="__codelineno-0-1255" name="__codelineno-0-1255"></a>
<a id="__codelineno-0-1256" name="__codelineno-0-1256"></a>    <span class="c1"># LangChain expects a list of tuples of the form (role, content)</span>
<a id="__codelineno-0-1257" name="__codelineno-0-1257"></a>    <span class="n">messages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-1258" name="__codelineno-0-1258"></a>        <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">]),</span> <span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]))</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span>
<a id="__codelineno-0-1259" name="__codelineno-0-1259"></a>    <span class="p">]</span>
<a id="__codelineno-0-1260" name="__codelineno-0-1260"></a>    <span class="k">return</span> <span class="n">LC_ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1261" name="__codelineno-0-1261"></a>        <span class="n">messages</span><span class="o">=</span><span class="n">messages</span><span class="p">,</span>
<a id="__codelineno-0-1262" name="__codelineno-0-1262"></a>        <span class="n">input_variables</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1263" name="__codelineno-0-1263"></a>        <span class="n">metadata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1264" name="__codelineno-0-1264"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h3 id="prompt_templates.prompt_templates.PromptTemplateDictionary" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">PromptTemplateDictionary</span>


</h3>


  <div class="doc doc-contents ">

  
      <p>A container class that holds multiple prompt templates (TextPromptTemplate or ChatPromptTemplate),
as defined under the "template_dictionary" key in a YAML file. This allows users to store and manage
multiple interdependent templates in one place (e.g., for an agent that needs a system prompt,
a planning prompt, etc.).</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code><span title="prompt_templates.prompt_templates.PromptTemplateDictionary.template_dictionary">template_dictionary</span></code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.BasePromptTemplate" href="#prompt_templates.prompt_templates.BasePromptTemplate">BasePromptTemplate</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A dictionary of sub-prompt name -&gt; BasePromptTemplate objects.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="prompt_templates.prompt_templates.PromptTemplateDictionary.metadata">metadata</span></code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Optional top-level metadata about this multi-prompt configuration.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="prompt_templates.prompt_templates.PromptTemplateDictionary.client_parameters">client_parameters</span></code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Optional top-level inference parameters (e.g., temperature).</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code><span title="prompt_templates.prompt_templates.PromptTemplateDictionary.custom_data">custom_data</span></code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Arbitrary additional data relevant to the multi-template.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1267">1267</a></span>
<span class="normal"><a href="#__codelineno-0-1268">1268</a></span>
<span class="normal"><a href="#__codelineno-0-1269">1269</a></span>
<span class="normal"><a href="#__codelineno-0-1270">1270</a></span>
<span class="normal"><a href="#__codelineno-0-1271">1271</a></span>
<span class="normal"><a href="#__codelineno-0-1272">1272</a></span>
<span class="normal"><a href="#__codelineno-0-1273">1273</a></span>
<span class="normal"><a href="#__codelineno-0-1274">1274</a></span>
<span class="normal"><a href="#__codelineno-0-1275">1275</a></span>
<span class="normal"><a href="#__codelineno-0-1276">1276</a></span>
<span class="normal"><a href="#__codelineno-0-1277">1277</a></span>
<span class="normal"><a href="#__codelineno-0-1278">1278</a></span>
<span class="normal"><a href="#__codelineno-0-1279">1279</a></span>
<span class="normal"><a href="#__codelineno-0-1280">1280</a></span>
<span class="normal"><a href="#__codelineno-0-1281">1281</a></span>
<span class="normal"><a href="#__codelineno-0-1282">1282</a></span>
<span class="normal"><a href="#__codelineno-0-1283">1283</a></span>
<span class="normal"><a href="#__codelineno-0-1284">1284</a></span>
<span class="normal"><a href="#__codelineno-0-1285">1285</a></span>
<span class="normal"><a href="#__codelineno-0-1286">1286</a></span>
<span class="normal"><a href="#__codelineno-0-1287">1287</a></span>
<span class="normal"><a href="#__codelineno-0-1288">1288</a></span>
<span class="normal"><a href="#__codelineno-0-1289">1289</a></span>
<span class="normal"><a href="#__codelineno-0-1290">1290</a></span>
<span class="normal"><a href="#__codelineno-0-1291">1291</a></span>
<span class="normal"><a href="#__codelineno-0-1292">1292</a></span>
<span class="normal"><a href="#__codelineno-0-1293">1293</a></span>
<span class="normal"><a href="#__codelineno-0-1294">1294</a></span>
<span class="normal"><a href="#__codelineno-0-1295">1295</a></span>
<span class="normal"><a href="#__codelineno-0-1296">1296</a></span>
<span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span>
<span class="normal"><a href="#__codelineno-0-1311">1311</a></span>
<span class="normal"><a href="#__codelineno-0-1312">1312</a></span>
<span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span>
<span class="normal"><a href="#__codelineno-0-1367">1367</a></span>
<span class="normal"><a href="#__codelineno-0-1368">1368</a></span>
<span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span>
<span class="normal"><a href="#__codelineno-0-1372">1372</a></span>
<span class="normal"><a href="#__codelineno-0-1373">1373</a></span>
<span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span>
<span class="normal"><a href="#__codelineno-0-1381">1381</a></span>
<span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span>
<span class="normal"><a href="#__codelineno-0-1397">1397</a></span>
<span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span>
<span class="normal"><a href="#__codelineno-0-1426">1426</a></span>
<span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span>
<span class="normal"><a href="#__codelineno-0-1437">1437</a></span>
<span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1267" name="__codelineno-0-1267"></a><span class="k">class</span><span class="w"> </span><span class="nc">PromptTemplateDictionary</span><span class="p">:</span>
<a id="__codelineno-0-1268" name="__codelineno-0-1268"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1269" name="__codelineno-0-1269"></a><span class="sd">    A container class that holds multiple prompt templates (TextPromptTemplate or ChatPromptTemplate),</span>
<a id="__codelineno-0-1270" name="__codelineno-0-1270"></a><span class="sd">    as defined under the &quot;template_dictionary&quot; key in a YAML file. This allows users to store and manage</span>
<a id="__codelineno-0-1271" name="__codelineno-0-1271"></a><span class="sd">    multiple interdependent templates in one place (e.g., for an agent that needs a system prompt,</span>
<a id="__codelineno-0-1272" name="__codelineno-0-1272"></a><span class="sd">    a planning prompt, etc.).</span>
<a id="__codelineno-0-1273" name="__codelineno-0-1273"></a>
<a id="__codelineno-0-1274" name="__codelineno-0-1274"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-1275" name="__codelineno-0-1275"></a><span class="sd">        template_dictionary (Dict[str, BasePromptTemplate]):</span>
<a id="__codelineno-0-1276" name="__codelineno-0-1276"></a><span class="sd">            A dictionary of sub-prompt name -&gt; BasePromptTemplate objects.</span>
<a id="__codelineno-0-1277" name="__codelineno-0-1277"></a><span class="sd">        metadata (Dict[str, Any]):</span>
<a id="__codelineno-0-1278" name="__codelineno-0-1278"></a><span class="sd">            Optional top-level metadata about this multi-prompt configuration.</span>
<a id="__codelineno-0-1279" name="__codelineno-0-1279"></a><span class="sd">        client_parameters (Dict[str, Any]):</span>
<a id="__codelineno-0-1280" name="__codelineno-0-1280"></a><span class="sd">            Optional top-level inference parameters (e.g., temperature).</span>
<a id="__codelineno-0-1281" name="__codelineno-0-1281"></a><span class="sd">        custom_data (Dict[str, Any]):</span>
<a id="__codelineno-0-1282" name="__codelineno-0-1282"></a><span class="sd">            Arbitrary additional data relevant to the multi-template.</span>
<a id="__codelineno-0-1283" name="__codelineno-0-1283"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1284" name="__codelineno-0-1284"></a>
<a id="__codelineno-0-1285" name="__codelineno-0-1285"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-1286" name="__codelineno-0-1286"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1287" name="__codelineno-0-1287"></a>        <span class="n">template_dictionary</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;BasePromptTemplate&quot;</span><span class="p">],</span>
<a id="__codelineno-0-1288" name="__codelineno-0-1288"></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1289" name="__codelineno-0-1289"></a>        <span class="n">client_parameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1290" name="__codelineno-0-1290"></a>        <span class="n">custom_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-1291" name="__codelineno-0-1291"></a>    <span class="p">):</span>
<a id="__codelineno-0-1292" name="__codelineno-0-1292"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span> <span class="o">=</span> <span class="n">template_dictionary</span>
<a id="__codelineno-0-1293" name="__codelineno-0-1293"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-1294" name="__codelineno-0-1294"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">client_parameters</span> <span class="o">=</span> <span class="n">client_parameters</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-1295" name="__codelineno-0-1295"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">custom_data</span> <span class="o">=</span> <span class="n">custom_data</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-1296" name="__codelineno-0-1296"></a>
<a id="__codelineno-0-1297" name="__codelineno-0-1297"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>        <span class="n">prompt_file_dic</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1302" name="__codelineno-0-1302"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1303" name="__codelineno-0-1303"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PromptTemplateDictionary&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1304" name="__codelineno-0-1304"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a><span class="sd">        Parse the multi-template structure from a Python dict (typically loaded from a YAML file).</span>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a><span class="sd">        Each key under &quot;template_dictionary&quot; is treated as a separate prompt definition.</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a><span class="sd">        We detect whether to instantiate a ChatPromptTemplate or TextPromptTemplate based</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a><span class="sd">        on the &quot;template&quot; field (list vs. string).</span>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a><span class="sd">            prompt_file_dic: The parsed YAML as a Python dictionary.</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><span class="sd">            populator: Which templating approach to use (e.g., jinja2).</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a><span class="sd">            jinja2_security_level: Jinja2 sandbox security level.</span>
<a id="__codelineno-0-1315" name="__codelineno-0-1315"></a>
<a id="__codelineno-0-1316" name="__codelineno-0-1316"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1317" name="__codelineno-0-1317"></a><span class="sd">            PromptTemplateDictionary: An instance containing all sub-prompts.</span>
<a id="__codelineno-0-1318" name="__codelineno-0-1318"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1319" name="__codelineno-0-1319"></a>        <span class="c1"># TODO: double-check alignment with_load_template_from_dict (in terms of validation and naming)</span>
<a id="__codelineno-0-1320" name="__codelineno-0-1320"></a>
<a id="__codelineno-0-1321" name="__codelineno-0-1321"></a>        <span class="c1"># Validate YAML structure</span>
<a id="__codelineno-0-1322" name="__codelineno-0-1322"></a>        <span class="k">if</span> <span class="s2">&quot;prompt&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prompt_file_dic</span><span class="p">:</span>
<a id="__codelineno-0-1323" name="__codelineno-0-1323"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1324" name="__codelineno-0-1324"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid YAML structure: The top-level keys are </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-1325" name="__codelineno-0-1325"></a>                <span class="s2">&quot;The YAML file must contain the key &#39;prompt&#39; as the top-level key.&quot;</span>
<a id="__codelineno-0-1326" name="__codelineno-0-1326"></a>            <span class="p">)</span>
<a id="__codelineno-0-1327" name="__codelineno-0-1327"></a>
<a id="__codelineno-0-1328" name="__codelineno-0-1328"></a>        <span class="n">prompt_data</span> <span class="o">=</span> <span class="n">prompt_file_dic</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1329" name="__codelineno-0-1329"></a>
<a id="__codelineno-0-1330" name="__codelineno-0-1330"></a>        <span class="c1"># Extract fields</span>
<a id="__codelineno-0-1331" name="__codelineno-0-1331"></a>        <span class="n">metadata</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1332" name="__codelineno-0-1332"></a>        <span class="n">client_parameters</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_parameters&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1333" name="__codelineno-0-1333"></a>        <span class="n">custom_data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-1334" name="__codelineno-0-1334"></a>            <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
<a id="__codelineno-0-1335" name="__codelineno-0-1335"></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-1336" name="__codelineno-0-1336"></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;template_dictionary&quot;</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;client_parameters&quot;</span><span class="p">,</span> <span class="s2">&quot;custom_data&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1337" name="__codelineno-0-1337"></a>        <span class="p">}</span>
<a id="__codelineno-0-1338" name="__codelineno-0-1338"></a>        <span class="n">custom_data</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;custom_data&quot;</span><span class="p">,</span> <span class="p">{}),</span> <span class="o">**</span><span class="n">custom_data</span><span class="p">}</span>
<a id="__codelineno-0-1339" name="__codelineno-0-1339"></a>
<a id="__codelineno-0-1340" name="__codelineno-0-1340"></a>        <span class="n">template_dictionary_raw</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template_dictionary&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1341" name="__codelineno-0-1341"></a>        <span class="k">if</span> <span class="n">template_dictionary_raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1342" name="__codelineno-0-1342"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The &#39;template_dictionary&#39; key is missing from the input data.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1343" name="__codelineno-0-1343"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_dictionary_raw</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-1344" name="__codelineno-0-1344"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The &#39;template_dictionary&#39; must be a dictionary.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1345" name="__codelineno-0-1345"></a>
<a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>        <span class="n">template_dictionary</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BasePromptTemplate</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1347" name="__codelineno-0-1347"></a>        <span class="k">for</span> <span class="n">sub_template_name</span><span class="p">,</span> <span class="n">sub_template</span> <span class="ow">in</span> <span class="n">template_dictionary_raw</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-1348" name="__codelineno-0-1348"></a>            <span class="c1"># Each sub_template is itself a dict that must have &quot;template&quot; and optionally &quot;template_variables&quot;, etc.</span>
<a id="__codelineno-0-1349" name="__codelineno-0-1349"></a>            <span class="k">if</span> <span class="s2">&quot;template&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sub_template</span><span class="p">:</span>
<a id="__codelineno-0-1350" name="__codelineno-0-1350"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1351" name="__codelineno-0-1351"></a>                    <span class="sa">f</span><span class="s2">&quot;Entry &#39;</span><span class="si">{</span><span class="n">sub_template_name</span><span class="si">}</span><span class="s2">&#39; must contain a &#39;template&#39; key. &quot;</span>
<a id="__codelineno-0-1352" name="__codelineno-0-1352"></a>                    <span class="sa">f</span><span class="s2">&quot;Found keys: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">sub_template</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1353" name="__codelineno-0-1353"></a>                <span class="p">)</span>
<a id="__codelineno-0-1354" name="__codelineno-0-1354"></a>
<a id="__codelineno-0-1355" name="__codelineno-0-1355"></a>            <span class="n">template_field</span> <span class="o">=</span> <span class="n">sub_template</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1356" name="__codelineno-0-1356"></a>            <span class="n">template_variables</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template_variables&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1357" name="__codelineno-0-1357"></a>            <span class="n">sub_metadata</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1358" name="__codelineno-0-1358"></a>            <span class="n">sub_client_parameters</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_parameters&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1359" name="__codelineno-0-1359"></a>            <span class="n">sub_custom_data</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;custom_data&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1360" name="__codelineno-0-1360"></a>
<a id="__codelineno-0-1361" name="__codelineno-0-1361"></a>            <span class="c1"># Decide whether it&#39;s a ChatPromptTemplate or TextPromptTemplate</span>
<a id="__codelineno-0-1362" name="__codelineno-0-1362"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_field</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">template_field</span><span class="p">):</span>
<a id="__codelineno-0-1363" name="__codelineno-0-1363"></a>                <span class="c1"># Likely ChatPromptTemplate</span>
<a id="__codelineno-0-1364" name="__codelineno-0-1364"></a>                <span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1365" name="__codelineno-0-1365"></a>                    <span class="n">template</span><span class="o">=</span><span class="n">template_field</span><span class="p">,</span>
<a id="__codelineno-0-1366" name="__codelineno-0-1366"></a>                    <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1367" name="__codelineno-0-1367"></a>                    <span class="n">metadata</span><span class="o">=</span><span class="n">sub_metadata</span><span class="p">,</span>
<a id="__codelineno-0-1368" name="__codelineno-0-1368"></a>                    <span class="n">client_parameters</span><span class="o">=</span><span class="n">sub_client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1369" name="__codelineno-0-1369"></a>                    <span class="n">custom_data</span><span class="o">=</span><span class="n">sub_custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1370" name="__codelineno-0-1370"></a>                    <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>                    <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-1372" name="__codelineno-0-1372"></a>                <span class="p">)</span>
<a id="__codelineno-0-1373" name="__codelineno-0-1373"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_field</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1374" name="__codelineno-0-1374"></a>                <span class="c1"># TextPromptTemplate</span>
<a id="__codelineno-0-1375" name="__codelineno-0-1375"></a>                <span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1376" name="__codelineno-0-1376"></a>                    <span class="n">template</span><span class="o">=</span><span class="n">template_field</span><span class="p">,</span>
<a id="__codelineno-0-1377" name="__codelineno-0-1377"></a>                    <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1378" name="__codelineno-0-1378"></a>                    <span class="n">metadata</span><span class="o">=</span><span class="n">sub_metadata</span><span class="p">,</span>
<a id="__codelineno-0-1379" name="__codelineno-0-1379"></a>                    <span class="n">client_parameters</span><span class="o">=</span><span class="n">sub_client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1380" name="__codelineno-0-1380"></a>                    <span class="n">custom_data</span><span class="o">=</span><span class="n">sub_custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1381" name="__codelineno-0-1381"></a>                    <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-1382" name="__codelineno-0-1382"></a>                    <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a>                <span class="p">)</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a>                    <span class="sa">f</span><span class="s2">&quot;Invalid template type under &#39;</span><span class="si">{</span><span class="n">sub_template_name</span><span class="si">}</span><span class="s2">&#39;. &quot;</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a>                    <span class="s2">&quot;Template must be either a string for text prompts &quot;</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a>                    <span class="s2">&quot;or a list of dicts for chat prompts.&quot;</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a>                <span class="p">)</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a>            <span class="n">template_dictionary</span><span class="o">=</span><span class="n">template_dictionary</span><span class="p">,</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a>            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a>            <span class="n">client_parameters</span><span class="o">=</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a>            <span class="n">custom_data</span><span class="o">=</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a>        <span class="p">)</span>
<a id="__codelineno-0-1397" name="__codelineno-0-1397"></a>
<a id="__codelineno-0-1398" name="__codelineno-0-1398"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">load_from_local</span><span class="p">(</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a>        <span class="n">file_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a>        <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a>        <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PromptTemplateDictionary&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a><span class="sd">        Load a multi-prompt YAML file from the local filesystem, parse it,</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a><span class="sd">        and create a PromptTemplateDictionary.</span>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a><span class="sd">            file_path: Path to the YAML file.</span>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a><span class="sd">            populator: Templating approach (jinja2, double brace, etc.).</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a><span class="sd">            jinja2_security_level: Security level for Jinja2 sandbox.</span>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a><span class="sd">            PromptTemplateDictionary with all sub-prompts.</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a>            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File not found: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a>        <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="s2">&quot;ruamel&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a>        <span class="k">with</span> <span class="n">file_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">yaml_handler</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">populator</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="p">)</span>
<a id="__codelineno-0-1426" name="__codelineno-0-1426"></a>
<a id="__codelineno-0-1427" name="__codelineno-0-1427"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BasePromptTemplate&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a><span class="sd">        Retrieve a sub-prompt by name.</span>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><span class="sd">            &gt;&gt;&gt; multi_template = PromptTemplateDictionary.load_from_local(&quot;agent_example_1.yaml&quot;)</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><span class="sd">            &gt;&gt;&gt; system_prompt = multi_template[&quot;agent_system_prompt&quot;]</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a><span class="sd">            &gt;&gt;&gt; populated = system_prompt.populate(tool_descriptions=&quot;...&quot;, task=&quot;...&quot;)</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span>
<a id="__codelineno-0-1437" name="__codelineno-0-1437"></a>
<a id="__codelineno-0-1438" name="__codelineno-0-1438"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a>        <span class="n">sub_template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a>        <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a><span class="sd">        Shortcut method to populate a single sub-prompt from this dictionary.</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a><span class="sd">            sub_template_name (str): The name of the sub-prompt to populate.</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a><span class="sd">            **user_provided_variables: Values for placeholders in the template.</span>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a><span class="sd">            The populated prompt, either a list of message dicts (for chat)</span>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a><span class="sd">            or a single string (for text).</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a>        <span class="k">if</span> <span class="n">sub_template_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span><span class="p">:</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No sub-prompt named &#39;</span><span class="si">{</span><span class="n">sub_template_name</span><span class="si">}</span><span class="s2">&#39; found.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.PromptTemplateDictionary.from_dict" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">from_dict</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">from_dict</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="s1">&#39;jinja2&#39;</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Parse the multi-template structure from a Python dict (typically loaded from a YAML file).</p>
<p>Each key under "template_dictionary" is treated as a separate prompt definition.
We detect whether to instantiate a ChatPromptTemplate or TextPromptTemplate based
on the "template" field (list vs. string).</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>prompt_file_dic</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The parsed YAML as a Python dictionary.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>populator</code></td>
          <td>
                <code><span title="prompt_templates.constants.PopulatorType">PopulatorType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Which templating approach to use (e.g., jinja2).</p>
            </div>
          </td>
          <td>
                <code>&#39;jinja2&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>jinja2_security_level</code></td>
          <td>
                <code><span title="prompt_templates.constants.Jinja2SecurityLevel">Jinja2SecurityLevel</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Jinja2 sandbox security level.</p>
            </div>
          </td>
          <td>
                <code>&#39;standard&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>PromptTemplateDictionary</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.PromptTemplateDictionary" href="#prompt_templates.prompt_templates.PromptTemplateDictionary">PromptTemplateDictionary</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An instance containing all sub-prompts.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1297">1297</a></span>
<span class="normal"><a href="#__codelineno-0-1298">1298</a></span>
<span class="normal"><a href="#__codelineno-0-1299">1299</a></span>
<span class="normal"><a href="#__codelineno-0-1300">1300</a></span>
<span class="normal"><a href="#__codelineno-0-1301">1301</a></span>
<span class="normal"><a href="#__codelineno-0-1302">1302</a></span>
<span class="normal"><a href="#__codelineno-0-1303">1303</a></span>
<span class="normal"><a href="#__codelineno-0-1304">1304</a></span>
<span class="normal"><a href="#__codelineno-0-1305">1305</a></span>
<span class="normal"><a href="#__codelineno-0-1306">1306</a></span>
<span class="normal"><a href="#__codelineno-0-1307">1307</a></span>
<span class="normal"><a href="#__codelineno-0-1308">1308</a></span>
<span class="normal"><a href="#__codelineno-0-1309">1309</a></span>
<span class="normal"><a href="#__codelineno-0-1310">1310</a></span>
<span class="normal"><a href="#__codelineno-0-1311">1311</a></span>
<span class="normal"><a href="#__codelineno-0-1312">1312</a></span>
<span class="normal"><a href="#__codelineno-0-1313">1313</a></span>
<span class="normal"><a href="#__codelineno-0-1314">1314</a></span>
<span class="normal"><a href="#__codelineno-0-1315">1315</a></span>
<span class="normal"><a href="#__codelineno-0-1316">1316</a></span>
<span class="normal"><a href="#__codelineno-0-1317">1317</a></span>
<span class="normal"><a href="#__codelineno-0-1318">1318</a></span>
<span class="normal"><a href="#__codelineno-0-1319">1319</a></span>
<span class="normal"><a href="#__codelineno-0-1320">1320</a></span>
<span class="normal"><a href="#__codelineno-0-1321">1321</a></span>
<span class="normal"><a href="#__codelineno-0-1322">1322</a></span>
<span class="normal"><a href="#__codelineno-0-1323">1323</a></span>
<span class="normal"><a href="#__codelineno-0-1324">1324</a></span>
<span class="normal"><a href="#__codelineno-0-1325">1325</a></span>
<span class="normal"><a href="#__codelineno-0-1326">1326</a></span>
<span class="normal"><a href="#__codelineno-0-1327">1327</a></span>
<span class="normal"><a href="#__codelineno-0-1328">1328</a></span>
<span class="normal"><a href="#__codelineno-0-1329">1329</a></span>
<span class="normal"><a href="#__codelineno-0-1330">1330</a></span>
<span class="normal"><a href="#__codelineno-0-1331">1331</a></span>
<span class="normal"><a href="#__codelineno-0-1332">1332</a></span>
<span class="normal"><a href="#__codelineno-0-1333">1333</a></span>
<span class="normal"><a href="#__codelineno-0-1334">1334</a></span>
<span class="normal"><a href="#__codelineno-0-1335">1335</a></span>
<span class="normal"><a href="#__codelineno-0-1336">1336</a></span>
<span class="normal"><a href="#__codelineno-0-1337">1337</a></span>
<span class="normal"><a href="#__codelineno-0-1338">1338</a></span>
<span class="normal"><a href="#__codelineno-0-1339">1339</a></span>
<span class="normal"><a href="#__codelineno-0-1340">1340</a></span>
<span class="normal"><a href="#__codelineno-0-1341">1341</a></span>
<span class="normal"><a href="#__codelineno-0-1342">1342</a></span>
<span class="normal"><a href="#__codelineno-0-1343">1343</a></span>
<span class="normal"><a href="#__codelineno-0-1344">1344</a></span>
<span class="normal"><a href="#__codelineno-0-1345">1345</a></span>
<span class="normal"><a href="#__codelineno-0-1346">1346</a></span>
<span class="normal"><a href="#__codelineno-0-1347">1347</a></span>
<span class="normal"><a href="#__codelineno-0-1348">1348</a></span>
<span class="normal"><a href="#__codelineno-0-1349">1349</a></span>
<span class="normal"><a href="#__codelineno-0-1350">1350</a></span>
<span class="normal"><a href="#__codelineno-0-1351">1351</a></span>
<span class="normal"><a href="#__codelineno-0-1352">1352</a></span>
<span class="normal"><a href="#__codelineno-0-1353">1353</a></span>
<span class="normal"><a href="#__codelineno-0-1354">1354</a></span>
<span class="normal"><a href="#__codelineno-0-1355">1355</a></span>
<span class="normal"><a href="#__codelineno-0-1356">1356</a></span>
<span class="normal"><a href="#__codelineno-0-1357">1357</a></span>
<span class="normal"><a href="#__codelineno-0-1358">1358</a></span>
<span class="normal"><a href="#__codelineno-0-1359">1359</a></span>
<span class="normal"><a href="#__codelineno-0-1360">1360</a></span>
<span class="normal"><a href="#__codelineno-0-1361">1361</a></span>
<span class="normal"><a href="#__codelineno-0-1362">1362</a></span>
<span class="normal"><a href="#__codelineno-0-1363">1363</a></span>
<span class="normal"><a href="#__codelineno-0-1364">1364</a></span>
<span class="normal"><a href="#__codelineno-0-1365">1365</a></span>
<span class="normal"><a href="#__codelineno-0-1366">1366</a></span>
<span class="normal"><a href="#__codelineno-0-1367">1367</a></span>
<span class="normal"><a href="#__codelineno-0-1368">1368</a></span>
<span class="normal"><a href="#__codelineno-0-1369">1369</a></span>
<span class="normal"><a href="#__codelineno-0-1370">1370</a></span>
<span class="normal"><a href="#__codelineno-0-1371">1371</a></span>
<span class="normal"><a href="#__codelineno-0-1372">1372</a></span>
<span class="normal"><a href="#__codelineno-0-1373">1373</a></span>
<span class="normal"><a href="#__codelineno-0-1374">1374</a></span>
<span class="normal"><a href="#__codelineno-0-1375">1375</a></span>
<span class="normal"><a href="#__codelineno-0-1376">1376</a></span>
<span class="normal"><a href="#__codelineno-0-1377">1377</a></span>
<span class="normal"><a href="#__codelineno-0-1378">1378</a></span>
<span class="normal"><a href="#__codelineno-0-1379">1379</a></span>
<span class="normal"><a href="#__codelineno-0-1380">1380</a></span>
<span class="normal"><a href="#__codelineno-0-1381">1381</a></span>
<span class="normal"><a href="#__codelineno-0-1382">1382</a></span>
<span class="normal"><a href="#__codelineno-0-1383">1383</a></span>
<span class="normal"><a href="#__codelineno-0-1384">1384</a></span>
<span class="normal"><a href="#__codelineno-0-1385">1385</a></span>
<span class="normal"><a href="#__codelineno-0-1386">1386</a></span>
<span class="normal"><a href="#__codelineno-0-1387">1387</a></span>
<span class="normal"><a href="#__codelineno-0-1388">1388</a></span>
<span class="normal"><a href="#__codelineno-0-1389">1389</a></span>
<span class="normal"><a href="#__codelineno-0-1390">1390</a></span>
<span class="normal"><a href="#__codelineno-0-1391">1391</a></span>
<span class="normal"><a href="#__codelineno-0-1392">1392</a></span>
<span class="normal"><a href="#__codelineno-0-1393">1393</a></span>
<span class="normal"><a href="#__codelineno-0-1394">1394</a></span>
<span class="normal"><a href="#__codelineno-0-1395">1395</a></span>
<span class="normal"><a href="#__codelineno-0-1396">1396</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1297" name="__codelineno-0-1297"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-1298" name="__codelineno-0-1298"></a><span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span>
<a id="__codelineno-0-1299" name="__codelineno-0-1299"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-1300" name="__codelineno-0-1300"></a>    <span class="n">prompt_file_dic</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<a id="__codelineno-0-1301" name="__codelineno-0-1301"></a>    <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1302" name="__codelineno-0-1302"></a>    <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1303" name="__codelineno-0-1303"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PromptTemplateDictionary&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1304" name="__codelineno-0-1304"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1305" name="__codelineno-0-1305"></a><span class="sd">    Parse the multi-template structure from a Python dict (typically loaded from a YAML file).</span>
<a id="__codelineno-0-1306" name="__codelineno-0-1306"></a>
<a id="__codelineno-0-1307" name="__codelineno-0-1307"></a><span class="sd">    Each key under &quot;template_dictionary&quot; is treated as a separate prompt definition.</span>
<a id="__codelineno-0-1308" name="__codelineno-0-1308"></a><span class="sd">    We detect whether to instantiate a ChatPromptTemplate or TextPromptTemplate based</span>
<a id="__codelineno-0-1309" name="__codelineno-0-1309"></a><span class="sd">    on the &quot;template&quot; field (list vs. string).</span>
<a id="__codelineno-0-1310" name="__codelineno-0-1310"></a>
<a id="__codelineno-0-1311" name="__codelineno-0-1311"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1312" name="__codelineno-0-1312"></a><span class="sd">        prompt_file_dic: The parsed YAML as a Python dictionary.</span>
<a id="__codelineno-0-1313" name="__codelineno-0-1313"></a><span class="sd">        populator: Which templating approach to use (e.g., jinja2).</span>
<a id="__codelineno-0-1314" name="__codelineno-0-1314"></a><span class="sd">        jinja2_security_level: Jinja2 sandbox security level.</span>
<a id="__codelineno-0-1315" name="__codelineno-0-1315"></a>
<a id="__codelineno-0-1316" name="__codelineno-0-1316"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1317" name="__codelineno-0-1317"></a><span class="sd">        PromptTemplateDictionary: An instance containing all sub-prompts.</span>
<a id="__codelineno-0-1318" name="__codelineno-0-1318"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1319" name="__codelineno-0-1319"></a>    <span class="c1"># TODO: double-check alignment with_load_template_from_dict (in terms of validation and naming)</span>
<a id="__codelineno-0-1320" name="__codelineno-0-1320"></a>
<a id="__codelineno-0-1321" name="__codelineno-0-1321"></a>    <span class="c1"># Validate YAML structure</span>
<a id="__codelineno-0-1322" name="__codelineno-0-1322"></a>    <span class="k">if</span> <span class="s2">&quot;prompt&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">prompt_file_dic</span><span class="p">:</span>
<a id="__codelineno-0-1323" name="__codelineno-0-1323"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1324" name="__codelineno-0-1324"></a>            <span class="sa">f</span><span class="s2">&quot;Invalid YAML structure: The top-level keys are </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">prompt_file_dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-1325" name="__codelineno-0-1325"></a>            <span class="s2">&quot;The YAML file must contain the key &#39;prompt&#39; as the top-level key.&quot;</span>
<a id="__codelineno-0-1326" name="__codelineno-0-1326"></a>        <span class="p">)</span>
<a id="__codelineno-0-1327" name="__codelineno-0-1327"></a>
<a id="__codelineno-0-1328" name="__codelineno-0-1328"></a>    <span class="n">prompt_data</span> <span class="o">=</span> <span class="n">prompt_file_dic</span><span class="p">[</span><span class="s2">&quot;prompt&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1329" name="__codelineno-0-1329"></a>
<a id="__codelineno-0-1330" name="__codelineno-0-1330"></a>    <span class="c1"># Extract fields</span>
<a id="__codelineno-0-1331" name="__codelineno-0-1331"></a>    <span class="n">metadata</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1332" name="__codelineno-0-1332"></a>    <span class="n">client_parameters</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_parameters&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1333" name="__codelineno-0-1333"></a>    <span class="n">custom_data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-1334" name="__codelineno-0-1334"></a>        <span class="n">k</span><span class="p">:</span> <span class="n">v</span>
<a id="__codelineno-0-1335" name="__codelineno-0-1335"></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-1336" name="__codelineno-0-1336"></a>        <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;template_dictionary&quot;</span><span class="p">,</span> <span class="s2">&quot;metadata&quot;</span><span class="p">,</span> <span class="s2">&quot;client_parameters&quot;</span><span class="p">,</span> <span class="s2">&quot;custom_data&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1337" name="__codelineno-0-1337"></a>    <span class="p">}</span>
<a id="__codelineno-0-1338" name="__codelineno-0-1338"></a>    <span class="n">custom_data</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;custom_data&quot;</span><span class="p">,</span> <span class="p">{}),</span> <span class="o">**</span><span class="n">custom_data</span><span class="p">}</span>
<a id="__codelineno-0-1339" name="__codelineno-0-1339"></a>
<a id="__codelineno-0-1340" name="__codelineno-0-1340"></a>    <span class="n">template_dictionary_raw</span> <span class="o">=</span> <span class="n">prompt_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template_dictionary&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1341" name="__codelineno-0-1341"></a>    <span class="k">if</span> <span class="n">template_dictionary_raw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-1342" name="__codelineno-0-1342"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The &#39;template_dictionary&#39; key is missing from the input data.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1343" name="__codelineno-0-1343"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_dictionary_raw</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-1344" name="__codelineno-0-1344"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The &#39;template_dictionary&#39; must be a dictionary.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1345" name="__codelineno-0-1345"></a>
<a id="__codelineno-0-1346" name="__codelineno-0-1346"></a>    <span class="n">template_dictionary</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">BasePromptTemplate</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-1347" name="__codelineno-0-1347"></a>    <span class="k">for</span> <span class="n">sub_template_name</span><span class="p">,</span> <span class="n">sub_template</span> <span class="ow">in</span> <span class="n">template_dictionary_raw</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-1348" name="__codelineno-0-1348"></a>        <span class="c1"># Each sub_template is itself a dict that must have &quot;template&quot; and optionally &quot;template_variables&quot;, etc.</span>
<a id="__codelineno-0-1349" name="__codelineno-0-1349"></a>        <span class="k">if</span> <span class="s2">&quot;template&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sub_template</span><span class="p">:</span>
<a id="__codelineno-0-1350" name="__codelineno-0-1350"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1351" name="__codelineno-0-1351"></a>                <span class="sa">f</span><span class="s2">&quot;Entry &#39;</span><span class="si">{</span><span class="n">sub_template_name</span><span class="si">}</span><span class="s2">&#39; must contain a &#39;template&#39; key. &quot;</span>
<a id="__codelineno-0-1352" name="__codelineno-0-1352"></a>                <span class="sa">f</span><span class="s2">&quot;Found keys: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">sub_template</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-1353" name="__codelineno-0-1353"></a>            <span class="p">)</span>
<a id="__codelineno-0-1354" name="__codelineno-0-1354"></a>
<a id="__codelineno-0-1355" name="__codelineno-0-1355"></a>        <span class="n">template_field</span> <span class="o">=</span> <span class="n">sub_template</span><span class="p">[</span><span class="s2">&quot;template&quot;</span><span class="p">]</span>
<a id="__codelineno-0-1356" name="__codelineno-0-1356"></a>        <span class="n">template_variables</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template_variables&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1357" name="__codelineno-0-1357"></a>        <span class="n">sub_metadata</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1358" name="__codelineno-0-1358"></a>        <span class="n">sub_client_parameters</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;client_parameters&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1359" name="__codelineno-0-1359"></a>        <span class="n">sub_custom_data</span> <span class="o">=</span> <span class="n">sub_template</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;custom_data&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1360" name="__codelineno-0-1360"></a>
<a id="__codelineno-0-1361" name="__codelineno-0-1361"></a>        <span class="c1"># Decide whether it&#39;s a ChatPromptTemplate or TextPromptTemplate</span>
<a id="__codelineno-0-1362" name="__codelineno-0-1362"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_field</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">template_field</span><span class="p">):</span>
<a id="__codelineno-0-1363" name="__codelineno-0-1363"></a>            <span class="c1"># Likely ChatPromptTemplate</span>
<a id="__codelineno-0-1364" name="__codelineno-0-1364"></a>            <span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ChatPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1365" name="__codelineno-0-1365"></a>                <span class="n">template</span><span class="o">=</span><span class="n">template_field</span><span class="p">,</span>
<a id="__codelineno-0-1366" name="__codelineno-0-1366"></a>                <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1367" name="__codelineno-0-1367"></a>                <span class="n">metadata</span><span class="o">=</span><span class="n">sub_metadata</span><span class="p">,</span>
<a id="__codelineno-0-1368" name="__codelineno-0-1368"></a>                <span class="n">client_parameters</span><span class="o">=</span><span class="n">sub_client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1369" name="__codelineno-0-1369"></a>                <span class="n">custom_data</span><span class="o">=</span><span class="n">sub_custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1370" name="__codelineno-0-1370"></a>                <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-1371" name="__codelineno-0-1371"></a>                <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-1372" name="__codelineno-0-1372"></a>            <span class="p">)</span>
<a id="__codelineno-0-1373" name="__codelineno-0-1373"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">template_field</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-1374" name="__codelineno-0-1374"></a>            <span class="c1"># TextPromptTemplate</span>
<a id="__codelineno-0-1375" name="__codelineno-0-1375"></a>            <span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">TextPromptTemplate</span><span class="p">(</span>
<a id="__codelineno-0-1376" name="__codelineno-0-1376"></a>                <span class="n">template</span><span class="o">=</span><span class="n">template_field</span><span class="p">,</span>
<a id="__codelineno-0-1377" name="__codelineno-0-1377"></a>                <span class="n">template_variables</span><span class="o">=</span><span class="n">template_variables</span><span class="p">,</span>
<a id="__codelineno-0-1378" name="__codelineno-0-1378"></a>                <span class="n">metadata</span><span class="o">=</span><span class="n">sub_metadata</span><span class="p">,</span>
<a id="__codelineno-0-1379" name="__codelineno-0-1379"></a>                <span class="n">client_parameters</span><span class="o">=</span><span class="n">sub_client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1380" name="__codelineno-0-1380"></a>                <span class="n">custom_data</span><span class="o">=</span><span class="n">sub_custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1381" name="__codelineno-0-1381"></a>                <span class="n">populator</span><span class="o">=</span><span class="n">populator</span><span class="p">,</span>
<a id="__codelineno-0-1382" name="__codelineno-0-1382"></a>                <span class="n">jinja2_security_level</span><span class="o">=</span><span class="n">jinja2_security_level</span><span class="p">,</span>
<a id="__codelineno-0-1383" name="__codelineno-0-1383"></a>            <span class="p">)</span>
<a id="__codelineno-0-1384" name="__codelineno-0-1384"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1385" name="__codelineno-0-1385"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<a id="__codelineno-0-1386" name="__codelineno-0-1386"></a>                <span class="sa">f</span><span class="s2">&quot;Invalid template type under &#39;</span><span class="si">{</span><span class="n">sub_template_name</span><span class="si">}</span><span class="s2">&#39;. &quot;</span>
<a id="__codelineno-0-1387" name="__codelineno-0-1387"></a>                <span class="s2">&quot;Template must be either a string for text prompts &quot;</span>
<a id="__codelineno-0-1388" name="__codelineno-0-1388"></a>                <span class="s2">&quot;or a list of dicts for chat prompts.&quot;</span>
<a id="__codelineno-0-1389" name="__codelineno-0-1389"></a>            <span class="p">)</span>
<a id="__codelineno-0-1390" name="__codelineno-0-1390"></a>
<a id="__codelineno-0-1391" name="__codelineno-0-1391"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
<a id="__codelineno-0-1392" name="__codelineno-0-1392"></a>        <span class="n">template_dictionary</span><span class="o">=</span><span class="n">template_dictionary</span><span class="p">,</span>
<a id="__codelineno-0-1393" name="__codelineno-0-1393"></a>        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
<a id="__codelineno-0-1394" name="__codelineno-0-1394"></a>        <span class="n">client_parameters</span><span class="o">=</span><span class="n">client_parameters</span><span class="p">,</span>
<a id="__codelineno-0-1395" name="__codelineno-0-1395"></a>        <span class="n">custom_data</span><span class="o">=</span><span class="n">custom_data</span><span class="p">,</span>
<a id="__codelineno-0-1396" name="__codelineno-0-1396"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.PromptTemplateDictionary.load_from_local" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">load_from_local</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">load_from_local</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">populator</span><span class="o">=</span><span class="s1">&#39;jinja2&#39;</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Load a multi-prompt YAML file from the local filesystem, parse it,
and create a PromptTemplateDictionary.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_path</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="pathlib.Path">Path</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Path to the YAML file.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>populator</code></td>
          <td>
                <code><span title="prompt_templates.constants.PopulatorType">PopulatorType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Templating approach (jinja2, double brace, etc.).</p>
            </div>
          </td>
          <td>
                <code>&#39;jinja2&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>jinja2_security_level</code></td>
          <td>
                <code><span title="prompt_templates.constants.Jinja2SecurityLevel">Jinja2SecurityLevel</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Security level for Jinja2 sandbox.</p>
            </div>
          </td>
          <td>
                <code>&#39;standard&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="prompt_templates.prompt_templates.PromptTemplateDictionary" href="#prompt_templates.prompt_templates.PromptTemplateDictionary">PromptTemplateDictionary</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>PromptTemplateDictionary with all sub-prompts.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1398">1398</a></span>
<span class="normal"><a href="#__codelineno-0-1399">1399</a></span>
<span class="normal"><a href="#__codelineno-0-1400">1400</a></span>
<span class="normal"><a href="#__codelineno-0-1401">1401</a></span>
<span class="normal"><a href="#__codelineno-0-1402">1402</a></span>
<span class="normal"><a href="#__codelineno-0-1403">1403</a></span>
<span class="normal"><a href="#__codelineno-0-1404">1404</a></span>
<span class="normal"><a href="#__codelineno-0-1405">1405</a></span>
<span class="normal"><a href="#__codelineno-0-1406">1406</a></span>
<span class="normal"><a href="#__codelineno-0-1407">1407</a></span>
<span class="normal"><a href="#__codelineno-0-1408">1408</a></span>
<span class="normal"><a href="#__codelineno-0-1409">1409</a></span>
<span class="normal"><a href="#__codelineno-0-1410">1410</a></span>
<span class="normal"><a href="#__codelineno-0-1411">1411</a></span>
<span class="normal"><a href="#__codelineno-0-1412">1412</a></span>
<span class="normal"><a href="#__codelineno-0-1413">1413</a></span>
<span class="normal"><a href="#__codelineno-0-1414">1414</a></span>
<span class="normal"><a href="#__codelineno-0-1415">1415</a></span>
<span class="normal"><a href="#__codelineno-0-1416">1416</a></span>
<span class="normal"><a href="#__codelineno-0-1417">1417</a></span>
<span class="normal"><a href="#__codelineno-0-1418">1418</a></span>
<span class="normal"><a href="#__codelineno-0-1419">1419</a></span>
<span class="normal"><a href="#__codelineno-0-1420">1420</a></span>
<span class="normal"><a href="#__codelineno-0-1421">1421</a></span>
<span class="normal"><a href="#__codelineno-0-1422">1422</a></span>
<span class="normal"><a href="#__codelineno-0-1423">1423</a></span>
<span class="normal"><a href="#__codelineno-0-1424">1424</a></span>
<span class="normal"><a href="#__codelineno-0-1425">1425</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1398" name="__codelineno-0-1398"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-1399" name="__codelineno-0-1399"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_from_local</span><span class="p">(</span>
<a id="__codelineno-0-1400" name="__codelineno-0-1400"></a>    <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-0-1401" name="__codelineno-0-1401"></a>    <span class="n">file_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
<a id="__codelineno-0-1402" name="__codelineno-0-1402"></a>    <span class="n">populator</span><span class="p">:</span> <span class="n">PopulatorType</span> <span class="o">=</span> <span class="s2">&quot;jinja2&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1403" name="__codelineno-0-1403"></a>    <span class="n">jinja2_security_level</span><span class="p">:</span> <span class="n">Jinja2SecurityLevel</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span><span class="p">,</span>
<a id="__codelineno-0-1404" name="__codelineno-0-1404"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PromptTemplateDictionary&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1405" name="__codelineno-0-1405"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1406" name="__codelineno-0-1406"></a><span class="sd">    Load a multi-prompt YAML file from the local filesystem, parse it,</span>
<a id="__codelineno-0-1407" name="__codelineno-0-1407"></a><span class="sd">    and create a PromptTemplateDictionary.</span>
<a id="__codelineno-0-1408" name="__codelineno-0-1408"></a>
<a id="__codelineno-0-1409" name="__codelineno-0-1409"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1410" name="__codelineno-0-1410"></a><span class="sd">        file_path: Path to the YAML file.</span>
<a id="__codelineno-0-1411" name="__codelineno-0-1411"></a><span class="sd">        populator: Templating approach (jinja2, double brace, etc.).</span>
<a id="__codelineno-0-1412" name="__codelineno-0-1412"></a><span class="sd">        jinja2_security_level: Security level for Jinja2 sandbox.</span>
<a id="__codelineno-0-1413" name="__codelineno-0-1413"></a>
<a id="__codelineno-0-1414" name="__codelineno-0-1414"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1415" name="__codelineno-0-1415"></a><span class="sd">        PromptTemplateDictionary with all sub-prompts.</span>
<a id="__codelineno-0-1416" name="__codelineno-0-1416"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1417" name="__codelineno-0-1417"></a>    <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-1418" name="__codelineno-0-1418"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-1419" name="__codelineno-0-1419"></a>        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File not found: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1420" name="__codelineno-0-1420"></a>
<a id="__codelineno-0-1421" name="__codelineno-0-1421"></a>    <span class="n">yaml_handler</span> <span class="o">=</span> <span class="n">create_yaml_handler</span><span class="p">(</span><span class="s2">&quot;ruamel&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1422" name="__codelineno-0-1422"></a>    <span class="k">with</span> <span class="n">file_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-1423" name="__codelineno-0-1423"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">yaml_handler</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-1424" name="__codelineno-0-1424"></a>
<a id="__codelineno-0-1425" name="__codelineno-0-1425"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">populator</span><span class="p">,</span> <span class="n">jinja2_security_level</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.PromptTemplateDictionary.__getitem__" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">__getitem__</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="fm">__getitem__</span><span class="p">(</span><span class="nf">sub_template_name</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Retrieve a sub-prompt by name.</p>

<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>multi_template = PromptTemplateDictionary.load_from_local("agent_example_1.yaml")
system_prompt = multi_template["agent_system_prompt"]
populated = system_prompt.populate(tool_descriptions="...", task="...")</p>
</blockquote>
</blockquote>
</blockquote>
</details>
          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1427">1427</a></span>
<span class="normal"><a href="#__codelineno-0-1428">1428</a></span>
<span class="normal"><a href="#__codelineno-0-1429">1429</a></span>
<span class="normal"><a href="#__codelineno-0-1430">1430</a></span>
<span class="normal"><a href="#__codelineno-0-1431">1431</a></span>
<span class="normal"><a href="#__codelineno-0-1432">1432</a></span>
<span class="normal"><a href="#__codelineno-0-1433">1433</a></span>
<span class="normal"><a href="#__codelineno-0-1434">1434</a></span>
<span class="normal"><a href="#__codelineno-0-1435">1435</a></span>
<span class="normal"><a href="#__codelineno-0-1436">1436</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1427" name="__codelineno-0-1427"></a><span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BasePromptTemplate&quot;</span><span class="p">:</span>
<a id="__codelineno-0-1428" name="__codelineno-0-1428"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1429" name="__codelineno-0-1429"></a><span class="sd">    Retrieve a sub-prompt by name.</span>
<a id="__codelineno-0-1430" name="__codelineno-0-1430"></a>
<a id="__codelineno-0-1431" name="__codelineno-0-1431"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-1432" name="__codelineno-0-1432"></a><span class="sd">        &gt;&gt;&gt; multi_template = PromptTemplateDictionary.load_from_local(&quot;agent_example_1.yaml&quot;)</span>
<a id="__codelineno-0-1433" name="__codelineno-0-1433"></a><span class="sd">        &gt;&gt;&gt; system_prompt = multi_template[&quot;agent_system_prompt&quot;]</span>
<a id="__codelineno-0-1434" name="__codelineno-0-1434"></a><span class="sd">        &gt;&gt;&gt; populated = system_prompt.populate(tool_descriptions=&quot;...&quot;, task=&quot;...&quot;)</span>
<a id="__codelineno-0-1435" name="__codelineno-0-1435"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1436" name="__codelineno-0-1436"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h4 id="prompt_templates.prompt_templates.PromptTemplateDictionary.populate" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">populate</span>


</h4>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">populate</span><span class="p">(</span><span class="n">sub_template_name</span><span class="p">,</span> <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Shortcut method to populate a single sub-prompt from this dictionary.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>sub_template_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the sub-prompt to populate.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>**user_provided_variables</code></td>
          <td>
                <code><span title="typing.Any">Any</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Values for placeholders in the template.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The populated prompt, either a list of message dicts (for chat)</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>or a single string (for text).</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>prompt_templates/prompt_templates.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1438">1438</a></span>
<span class="normal"><a href="#__codelineno-0-1439">1439</a></span>
<span class="normal"><a href="#__codelineno-0-1440">1440</a></span>
<span class="normal"><a href="#__codelineno-0-1441">1441</a></span>
<span class="normal"><a href="#__codelineno-0-1442">1442</a></span>
<span class="normal"><a href="#__codelineno-0-1443">1443</a></span>
<span class="normal"><a href="#__codelineno-0-1444">1444</a></span>
<span class="normal"><a href="#__codelineno-0-1445">1445</a></span>
<span class="normal"><a href="#__codelineno-0-1446">1446</a></span>
<span class="normal"><a href="#__codelineno-0-1447">1447</a></span>
<span class="normal"><a href="#__codelineno-0-1448">1448</a></span>
<span class="normal"><a href="#__codelineno-0-1449">1449</a></span>
<span class="normal"><a href="#__codelineno-0-1450">1450</a></span>
<span class="normal"><a href="#__codelineno-0-1451">1451</a></span>
<span class="normal"><a href="#__codelineno-0-1452">1452</a></span>
<span class="normal"><a href="#__codelineno-0-1453">1453</a></span>
<span class="normal"><a href="#__codelineno-0-1454">1454</a></span>
<span class="normal"><a href="#__codelineno-0-1455">1455</a></span>
<span class="normal"><a href="#__codelineno-0-1456">1456</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1438" name="__codelineno-0-1438"></a><span class="k">def</span><span class="w"> </span><span class="nf">populate</span><span class="p">(</span>
<a id="__codelineno-0-1439" name="__codelineno-0-1439"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-1440" name="__codelineno-0-1440"></a>    <span class="n">sub_template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-1441" name="__codelineno-0-1441"></a>    <span class="o">**</span><span class="n">user_provided_variables</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<a id="__codelineno-0-1442" name="__codelineno-0-1442"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<a id="__codelineno-0-1443" name="__codelineno-0-1443"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1444" name="__codelineno-0-1444"></a><span class="sd">    Shortcut method to populate a single sub-prompt from this dictionary.</span>
<a id="__codelineno-0-1445" name="__codelineno-0-1445"></a>
<a id="__codelineno-0-1446" name="__codelineno-0-1446"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1447" name="__codelineno-0-1447"></a><span class="sd">        sub_template_name (str): The name of the sub-prompt to populate.</span>
<a id="__codelineno-0-1448" name="__codelineno-0-1448"></a><span class="sd">        **user_provided_variables: Values for placeholders in the template.</span>
<a id="__codelineno-0-1449" name="__codelineno-0-1449"></a>
<a id="__codelineno-0-1450" name="__codelineno-0-1450"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1451" name="__codelineno-0-1451"></a><span class="sd">        The populated prompt, either a list of message dicts (for chat)</span>
<a id="__codelineno-0-1452" name="__codelineno-0-1452"></a><span class="sd">        or a single string (for text).</span>
<a id="__codelineno-0-1453" name="__codelineno-0-1453"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1454" name="__codelineno-0-1454"></a>    <span class="k">if</span> <span class="n">sub_template_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span><span class="p">:</span>
<a id="__codelineno-0-1455" name="__codelineno-0-1455"></a>        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No sub-prompt named &#39;</span><span class="si">{</span><span class="n">sub_template_name</span><span class="si">}</span><span class="s2">&#39; found.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1456" name="__codelineno-0-1456"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_dictionary</span><span class="p">[</span><span class="n">sub_template_name</span><span class="p">]</span><span class="o">.</span><span class="n">populate</span><span class="p">(</span><span class="o">**</span><span class="n">user_provided_variables</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>




  </div>

  </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../template_dictionaries/" class="md-footer__link md-footer__link--prev" aria-label="Previous: PromptTemplateDictionaries">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                PromptTemplateDictionaries
              </div>
            </div>
          </a>
        
        
          
          <a href="../utils/" class="md-footer__link md-footer__link--next" aria-label="Next: Utility functions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Utility functions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/MoritzLaurer/prompt_templates" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/prompt-templates/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.code.strip_repl_prompts", "navigation.footer", "navigation.instant", "navigation.tracking", "toc.follow", "header.autohide"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../javascripts/strip_repl.js"></script>
      
    
  </body>
</html>